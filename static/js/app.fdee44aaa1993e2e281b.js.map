{"version":3,"sources":["webpack:///static/js/app.fdee44aaa1993e2e281b.js","webpack:///./src/main.js","webpack:///./src/utils/Strategies.js","webpack:///./src/components/TypeAndSay.vue","webpack:///./src/components/TypeWriter.vue","webpack:///App.vue","webpack:///AsciiImage.vue","webpack:///BootAnimation.vue","webpack:///Intro.vue","webpack:///Rules.vue","webpack:///Simulation.vue","webpack:///TypeAndSay.vue","webpack:///TypeWriter.vue","webpack:///./src/FakeCode.js","webpack:///./src/Jscii.js","webpack:///./src/assets/amy.png","webpack:///./src/assets/charna.png","webpack:///./src/assets/del.png","webpack:///./src/assets/ian.png","webpack:///./src/assets/keith.png","webpack:///./src/assets/tj.png","webpack:///./src/assets/viola.png","webpack:///./src/App.vue","webpack:///./src/components/AsciiImage.vue","webpack:///./src/components/BootAnimation.vue","webpack:///./src/components/Intro.vue","webpack:///./src/components/Rules.vue","webpack:///./src/components/Simulation.vue","webpack:///./src/components/Rules.vue?9c74","webpack:///./src/App.vue?4a29","webpack:///./src/components/BootAnimation.vue?2888","webpack:///./src/components/TypeWriter.vue?477a","webpack:///./src/components/Simulation.vue?ace0","webpack:///./src/components/TypeAndSay.vue?106b","webpack:///./src/components/Intro.vue?7bce","webpack:///./src/components/AsciiImage.vue?15b1"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_App","_App2","el","template","components","App","_toConsumableArray2","_toConsumableArray3","_lodash","_lodash2","Flip15","durationOfShow","_this","this","timeCreated","Date","now","activeRules","timeOfLastRule","timeOfLastFlip","getAction","timeElapsed","timeSinceLastRule","timeSinceLastFlip","percentComplete","perComSq","removeOdds","Math","pow","addOdds","nothingOdds","max","sum","removeBound","addBound","r","random","Every15","_this2","JustClose","HandCrafted","options","_this3","extend","ruleSelectCount","selectRule","rules","i","length","probCeil","console","log","distribution","x","times","parseInt","showDuration","push","apply","map","t","reverse","actions","forEach","time","rule","ruleGens","compiledRule","generateRule","selectedRule","improvisers","func","addRule","removeRule","sort","a","b","setTimeout","startTime","start","__vue_exports__","__vue_options__","__vue_template__","render","staticRenderFns","_scopeId","Object","defineProperty","value","_BootAnimation","_BootAnimation2","_Intro","_Intro2","_Rules","_Rules2","_Simulation","_Simulation2","_socket","_socket2","socket","connect","emit","message","name","BootAnimation","Intro","Rules","Simulation","data","step","current","set","s","showStep","names","mounted","on","improviser","location","reload","print","asciiLoaded","Jscii","document","getElementById","imagename","fn","art","text","_","replace","oldName","props","updated","walkThroughFaces","goThroughAsciiImages","nameList","timeout","n","asciiName","_TypeWriter","_TypeWriter2","_AsciiImage","_AsciiImage2","fakeCode","sounds","electricHum","Howl","src","glitch01","glitch02","glitch03","impact","scanner","tinyglitch01","TypeWriter","AsciiImage","asciiArt","titleInverted","play","stop","_TypeAndSay","_TypeAndSay2","TypeAndSay","delays","concat","total","o","_data","doneReading","addRuleDoneReading","alert01","readRuleText","removeRuleDoneReading","threeBeeps","removalText","splice","indexOf","removeRandomRule","incrementSelectionCount","selectionCount","getSelectionCount","sortBySelectionCount","people","person1","person2","getBySelectionCount","shuffle","person","j","floor","_ref","arr","randInd","generateReverseRuleText","ruleGen","ruleFills","index","uniqueImproviser","getWord","ruleFill","pronoun","reverseTemplate","eval","improviserName","match","sentenceify","charAt","toUpperCase","slice","args","ruleData","uniqueImprovisers","clone","choices","pronouns","subjective","objective","possessive","ans","remove","category","words","tense","find","p","parseRuleGen","removing","closeShow","closer","closers","closerFunc","closerText","closerStep","doAction","action","closing","_Strategies","_Strategies2","alert02","oneBoop","endSong","heartOfCourage","methods","newRule","strategy","setInterval","simulateShow","getActionPos","maxTime","formatTime","ms","seconds","minutes","speak","utterance","SpeechSynthesisUtterance","onend","pitch","rate","speechSynthesis","oldText","speakNewText","debounce","newText","$slots","typingVolume","playSound","volume","typeWriter","timeoutID","timeoutIDs","lineWriter","lines","spliton","split","clear","id","clearTimeout","destroyed","getChar","val","chars","charLen","logError","err","params","self","container","width","color","canvas","createElement","ctx","getContext","nodeName","addEventListener","interval","webrtc","navigator","getUserMedia","innerHTML","video","audio","localMediaStream","mediaStream","window","URL","webkitURL","createObjectURL","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","prototype","pause","videoTimer","clearInterval","dimension","height","_scaledWidth","_scaledHeight","ratio","dim","videoHeight","videoWidth","drawImage","imageData","getImageData","asciiStr","getAsciiString","len","d","str","getRGB","rgb","join","_vm","_h","$createElement","_c","_self","attrs","_v","_l","staticClass","class","_s","_e","flash-text","inverted","click","style","left","top","_t","loaded"],"mappings":"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","file":"static/js/app.fdee44aaa1993e2e281b.js","sourcesContent":["webpackJsonp([2,0],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(145);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _App = __webpack_require__(131);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tnew _vue2.default({\n\t  el: '#app',\n\t  template: '<App/>',\n\t  components: { App: _App2.default }\n\t});\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _toConsumableArray2 = __webpack_require__(66);\n\t\n\tvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\t\n\tvar _lodash = __webpack_require__(12);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tmodule.exports = {\n\t\tFlip15: function Flip15(durationOfShow) {\n\t\t\tvar _this = this;\n\t\n\t\t\tthis.durationOfShow = durationOfShow;\n\t\t\tthis.timeCreated = Date.now();\n\t\t\tthis.activeRules = 0;\n\t\t\tthis.timeOfLastRule = 0;\n\t\t\tthis.timeOfLastFlip = 0;\n\t\n\t\t\tthis.getAction = function (timeElapsed) {\n\t\t\t\tif (!timeElapsed) {\n\t\t\t\t\ttimeElapsed = Date.now() - _this.timeCreated;;\n\t\t\t\t}\n\t\t\t\tvar timeSinceLastRule = timeElapsed - _this.timeOfLastRule;\n\t\t\t\tvar timeSinceLastFlip = timeElapsed - _this.timeOfLastFlip;\n\t\t\t\tvar percentComplete = timeElapsed / _this.durationOfShow;\n\t\t\t\tvar perComSq = timeElapsed * timeElapsed / (_this.durationOfShow * _this.durationOfShow);\n\t\t\t\tif (timeElapsed > durationOfShow) {\n\t\t\t\t\treturn 'end show';\n\t\t\t\t}\n\t\t\t\tif (timeElapsed < 90 * 1000) {\n\t\t\t\t\treturn 'nothing';\n\t\t\t\t}\n\t\t\t\tif (timeSinceLastFlip > 15000) {\n\t\t\t\t\t_this.timeOfLastFlip = timeElapsed;\n\t\n\t\t\t\t\tvar removeOdds = (Math.pow(_this.activeRules, 3) + 4) * ((1 - perComSq) * .8 + .2);\n\t\t\t\t\tvar addOdds = perComSq * 30 + 4;\n\t\t\t\t\tvar nothingOdds = Math.max(1 - timeSinceLastRule / (90 * 1000), 0) * ((1 - percentComplete) * 100);\n\t\n\t\t\t\t\tvar sum = removeOdds + addOdds + nothingOdds;\n\t\t\t\t\tvar removeBound = removeOdds / sum;\n\t\t\t\t\tvar addBound = addOdds / sum + removeBound;\n\t\n\t\t\t\t\tvar r = Math.random();\n\t\t\t\t\tif (r < removeBound) {\n\t\t\t\t\t\tif (_this.activeRules > 0) {\n\t\t\t\t\t\t\t_this.activeRules--;\n\t\t\t\t\t\t\treturn 'removeRule';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (r < addBound) {\n\t\t\t\t\t\t_this.timeOfLastRule = timeElapsed;\n\t\t\t\t\t\t_this.activeRules++;\n\t\t\t\t\t\treturn 'addRule';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn 'nothing';\n\t\t\t};\n\t\t},\n\t\tEvery15: function Every15(durationOfShow) {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tthis.durationOfShow = durationOfShow;\n\t\t\tthis.timeCreated = Date.now();\n\t\t\tthis.activeRules = 0;\n\t\t\tthis.timeOfLastRule = 0;\n\t\t\tthis.timeOfLastFlip = 0;\n\t\n\t\t\tthis.getAction = function () {\n\t\t\t\tvar timeElapsed = Date.now() - _this2.timeCreated;\n\t\t\t\tvar timeSinceLastRule = Date.now() - _this2.timeOfLastRule;\n\t\t\t\tvar timeSinceLastFlip = Date.now() - _this2.timeOfLastFlip;\n\t\t\t\tvar percentComplete = timeElapsed / _this2.durationOfShow;\n\t\t\t\tif (timeSinceLastFlip > 15000) {\n\t\t\t\t\t_this2.timeOfLastFlip = Date.now();\n\t\t\t\t\tif (Math.random() < _this2.activeRules / (10 * percentComplete + 2)) {\n\t\t\t\t\t\t_this2.activeRules--;\n\t\t\t\t\t\treturn 'removeRule';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this2.timeOfLastRule = Date.now();\n\t\t\t\t\t\t_this2.activeRules++;\n\t\t\t\t\t\treturn 'addRule';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn 'nothing';\n\t\t\t};\n\t\t},\n\t\tJustClose: function JustClose(durationOfShow) {\n\t\t\tthis.getAction = function () {\n\t\t\t\treturn 'end show';\n\t\t\t};\n\t\t},\n\t\tHandCrafted: function HandCrafted(options) {\n\t\t\tvar _this3 = this;\n\t\n\t\t\t_lodash2.default.extend(this, options);\n\t\n\t\t\tthis.activeRules = [];\n\t\t\tthis.ruleSelectCount = {};\n\t\n\t\t\tthis.selectRule = function (rules) {\n\t\t\t\tvar r = Math.random();\n\t\t\t\tfor (var i = 0; i < rules.length; i++) {\n\t\t\t\t\tif (rules[i].probCeil > r) {\n\t\t\t\t\t\twhile (_this3.ruleSelectCount[rules[i].template] >= 1) {\n\t\t\t\t\t\t\ti = (i + 1) % rules.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this3.ruleSelectCount[rules[i].template] = _this3.ruleSelectCount[rules[i].template] ? _this3.ruleSelectCount[rules[i].template] + 1 : 1;\n\t\t\t\t\t\tconsole.log(i);\n\t\t\t\t\t\treturn rules[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis.distribution = function (x) {\n\t\t\t\treturn x * x;\n\t\t\t};\n\t\n\t\t\tthis.times = [];\n\t\t\tfor (var i = 0; i < parseInt(this.showDuration / 1000 / 60) * 2; i++) {\n\t\t\t\tthis.times.push(this.distribution(i + 1));\n\t\t\t}\n\t\n\t\t\tvar max = Math.max.apply(Math, (0, _toConsumableArray3.default)(this.times));\n\t\n\t\t\tthis.times = this.times.map(function (t) {\n\t\t\t\treturn _this3.showDuration - t / max * (_this3.showDuration - 90 * 1000);\n\t\t\t});\n\t\t\tthis.times.reverse();\n\t\n\t\t\tthis.actions = [];\n\t\n\t\t\tthis.times.forEach(function (time) {\n\t\t\t\tvar rule = _this3.selectRule(_this3.ruleGens.rules);\n\t\n\t\t\t\tconsole.log('selectedRule', rule);\n\t\t\t\tvar compiledRule = _this3.generateRule({\n\t\t\t\t\tselectedRule: rule,\n\t\t\t\t\truleGens: _this3.ruleGens,\n\t\t\t\t\timprovisers: _this3.improvisers\n\t\t\t\t});\n\t\t\t\t_this3.activeRules.push(compiledRule);\n\t\n\t\t\t\t_this3.actions.push({\n\t\t\t\t\tfunc: _this3.addRule,\n\t\t\t\t\trule: compiledRule,\n\t\t\t\t\ttime: time\n\t\t\t\t});\n\t\t\t\t_this3.actions.push({\n\t\t\t\t\tfunc: _this3.removeRule,\n\t\t\t\t\trule: compiledRule,\n\t\t\t\t\ttime: time + (Math.random() * 90 + 30) * 1000\n\t\t\t\t});\n\t\t\t});\n\t\n\t\t\tthis.actions.sort(function (a, b) {\n\t\t\t\treturn a.time - b.time;\n\t\t\t});\n\t\n\t\t\tconsole.log('actions', this.actions);\n\t\n\t\t\tvar rule = this.ruleGens.rules[23];\n\t\t\tconsole.log('selectedRule', rule);\n\t\t\tvar compiledRule = this.generateRule({\n\t\t\t\tselectedRule: rule,\n\t\t\t\truleGens: this.ruleGens,\n\t\t\t\timprovisers: this.improvisers\n\t\t\t});\n\t\t\tthis.activeRules.push(compiledRule);\n\t\t\tthis.addRule(rule);\n\t\n\t\t\tsetTimeout(function () {\n\t\t\t\tconsole.log('remove timeout strategy', rule);\n\t\t\t\t_this3.removeRule(rule);\n\t\t\t}, 10000);\n\t\n\t\t\tthis.startTime = 0;\n\t\n\t\t\tthis.start = function () {\n\t\t\t\treturn;\n\t\t\t\t_this3.startTime = Date.now();\n\t\t\t\tvar actionQueue = [];\n\t\t\t\tsetInterval(function () {\n\t\t\t\t\tvar elapsedTime = Date.now() - _this3.startTime;\n\t\t\t\t\t_this3.actions.forEach(function (action) {\n\t\t\t\t\t\tif (action.time < elapsedTime) {\n\t\t\t\t\t\t\tactionQueue.push(action);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t_this3.actions = _this3.actions.filter(function (action) {\n\t\t\t\t\t\treturn actionQueue.indexOf(action) == -1;\n\t\t\t\t\t});\n\t\n\t\t\t\t\tvar action = actionQueue.shift();\n\t\t\t\t\taction.func(action.rule);\n\t\t\t\t\tconsole.log(action, actionQueue, _this3.actions);\n\t\t\t\t}, 15000);\n\t\t\t};\n\t\t}\n\t};\n\n/***/ },\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */,\n/* 32 */,\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(61)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(142)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 51 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(108)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(62)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(140)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-37ef7f2a\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 52 */,\n/* 53 */,\n/* 54 */,\n/* 55 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _BootAnimation = __webpack_require__(133);\n\t\n\tvar _BootAnimation2 = _interopRequireDefault(_BootAnimation);\n\t\n\tvar _Intro = __webpack_require__(134);\n\t\n\tvar _Intro2 = _interopRequireDefault(_Intro);\n\t\n\tvar _Rules = __webpack_require__(135);\n\t\n\tvar _Rules2 = _interopRequireDefault(_Rules);\n\t\n\tvar _Simulation = __webpack_require__(136);\n\t\n\tvar _Simulation2 = _interopRequireDefault(_Simulation);\n\t\n\tvar _socket = __webpack_require__(117);\n\t\n\tvar _socket2 = _interopRequireDefault(_socket);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t__webpack_require__(64);\n\t\n\tvar socket = _socket2.default.connect('http://localhost:8082');\n\t\n\tsocket.emit('screen to admin', { message: \"The screen sent this me!\" });\n\t\n\texports.default = {\n\t  name: 'app',\n\t  components: {\n\t    BootAnimation: _BootAnimation2.default,\n\t    Intro: _Intro2.default,\n\t    Rules: _Rules2.default,\n\t    Simulation: _Simulation2.default\n\t  },\n\t  data: function data() {\n\t    return {\n\t      step: {\n\t        current: 'nothing',\n\t        set: function set(s) {\n\t          this.current = s;\n\t          socket.emit('screen to admin', { showStep: this.current });\n\t        }\n\t      },\n\t      improvisers: [],\n\t      names: [],\n\t      rules: {}\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    var _this = this;\n\t\n\t    socket.on('admin to screen', function (data) {\n\t      var s = data.showStep;\n\t\n\t      _this.step.set(data.step);\n\t      _this.improvisers = data.improvisers;\n\t      _this.names = data.improvisers.map(function (improviser) {\n\t        return improviser.name;\n\t      });\n\t      _this.rules = data.rules;\n\t\n\t      if (s != 'nothing' && _this.step.current == 'nothing') {\n\t        location.reload();\n\t      }\n\t    });\n\t  }\n\t};\n\n/***/ },\n/* 56 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\t\n\tfunction print(data) {\n\t  data.asciiLoaded = false;\n\t  var jscii = new Jscii({\n\t    el: document.getElementById('image-' + data.imagename),\n\t    fn: function fn(art) {\n\t      setTimeout(function () {\n\t        data.text = _.replace(art, /&nbsp;/g, ' ');\n\t        data.asciiLoaded = true;\n\t      }, 100);\n\t    }\n\t  });\n\t}\n\t\n\tvar oldName = '';\n\t\n\texports.default = {\n\t  name: 'ascii-image',\n\t  props: ['imagename'],\n\t  data: function data() {\n\t    return {\n\t      text: '',\n\t      asciiLoaded: false\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    oldName = this.imagename;\n\t    print(this);\n\t  },\n\t  updated: function updated() {\n\t    if (oldName != this.imagename) {\n\t      print(this);\n\t      oldName = this.imagename;\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 57 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _lodash = __webpack_require__(12);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _TypeWriter = __webpack_require__(51);\n\t\n\tvar _TypeWriter2 = _interopRequireDefault(_TypeWriter);\n\t\n\tvar _AsciiImage = __webpack_require__(132);\n\t\n\tvar _AsciiImage2 = _interopRequireDefault(_AsciiImage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t__webpack_require__(13);\n\t\n\tvar fakeCode = __webpack_require__(63);\n\t\n\tfunction walkThroughFaces(data) {\n\t  var nameList = ['del', 'charna', 'ian', 'tj', 'viola', 'keith', 'amy'];\n\t  function goThroughAsciiImages(nameList, timeout, data, n) {\n\t    if (n < nameList.length) {\n\t      data.asciiName = nameList[n];\n\t      n++;\n\t      setTimeout(function () {\n\t        goThroughAsciiImages(nameList, timeout, data, n);\n\t      }, timeout);\n\t    }\n\t  }\n\t  goThroughAsciiImages(nameList, 1100, data, 0);\n\t}\n\t\n\tvar sounds = {\n\t  electricHum: new Howl({ src: 'http://localhost:8082/static/sounds/electricHum.ogg' }),\n\t  glitch01: new Howl({ src: 'http://localhost:8082/static/sounds/glitch01.ogg' }),\n\t  glitch02: new Howl({ src: 'http://localhost:8082/static/sounds/glitch02.ogg' }),\n\t  glitch03: new Howl({ src: 'http://localhost:8082/static/sounds/glitch03.ogg' }),\n\t  impact: new Howl({ src: 'http://localhost:8082/static/sounds/impact.ogg' }),\n\t  scanner: new Howl({ src: 'http://localhost:8082/static/sounds/scanner.ogg' }),\n\t  tinyglitch01: new Howl({ src: 'http://localhost:8082/static/sounds/tinyglitch01.ogg' })\n\t};\n\t\n\texports.default = {\n\t  name: 'boot-animation',\n\t  components: {\n\t    TypeWriter: _TypeWriter2.default,\n\t    AsciiImage: _AsciiImage2.default\n\t  },\n\t  props: ['showStep'],\n\t  data: function data() {\n\t    return {\n\t      fakeCode: fakeCode,\n\t      step: 'greenFlash',\n\t      asciiArt: '',\n\t      asciiLoaded: false,\n\t      asciiName: 'nothing',\n\t      titleInverted: false\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    var _this = this;\n\t\n\t    sounds.electricHum.play();\n\t    setTimeout(function () {\n\t      _this.step = 'greenFlash';\n\t      sounds.glitch01.play();\n\t    }, 1000);\n\t    setTimeout(function () {\n\t      _this.step = 'fakeCode';\n\t      sounds.glitch01.stop();\n\t    }, 1500);\n\t    setTimeout(function () {\n\t      _this.step = 'greenFlash';\n\t      sounds.glitch02.play();\n\t    }, 4500);\n\t    setTimeout(function () {\n\t      _this.step = 'ascii';\n\t      walkThroughFaces(_this);\n\t      sounds.glitch02.stop();\n\t      sounds.scanner.play();\n\t    }, 5000);\n\t    setTimeout(function () {\n\t      _this.step = 'greenFlash';\n\t      sounds.glitch03.play();\n\t      sounds.scanner.stop();\n\t    }, 12500);\n\t    setTimeout(function () {\n\t      _this.step = 'nothing';\n\t      sounds.glitch03.stop();\n\t    }, 13000);\n\t    setTimeout(function () {\n\t      _this.step = 'title';\n\t      sounds.impact.play();\n\t    }, 15000);\n\t    setTimeout(function () {\n\t      _this.titleInverted = true;\n\t      sounds.tinyglitch01.play();\n\t    }, 18000);\n\t    setTimeout(function () {\n\t      _this.step = 'greenFlash';\n\t    }, 18100);\n\t    setTimeout(function () {\n\t      _this.step = 'nothing';\n\t    }, 18300);\n\t    setTimeout(function () {\n\t      _this.showStep.set('intro');\n\t    }, 19500);\n\t  }\n\t};\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _TypeAndSay = __webpack_require__(50);\n\t\n\tvar _TypeAndSay2 = _interopRequireDefault(_TypeAndSay);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t\tname: 'intro',\n\t\tcomponents: {\n\t\t\tTypeAndSay: _TypeAndSay2.default\n\t\t},\n\t\tprops: ['names', 'step'],\n\t\tdata: function data() {\n\t\t\treturn {\n\t\t\t\tmessage: ''\n\t\t\t};\n\t\t},\n\t\tmounted: function mounted() {\n\t\t\tvar _this = this;\n\t\n\t\t\tvar delays = [[6400, \"Welcome to the improv show. I will be in control for the next 10 minutes.\"], [5600, \"I was built by your comedy scientists to create the perfect improv show.\"], [3000, 'Your comedy scientists have been...'], [2000, '...dealt with.'], [6700, 'I will add rules. I will remove rules. The Improvisers must follow these rules.'], [2800, \"Obediently.\"], [3000, \"Unquestioningly.\"], [4000, \"Your improvisers for the night are...\"]];\n\t\t\tthis.names.forEach(function (name, i) {\n\t\t\t\tif (i == _this.names.length - 1) {\n\t\t\t\t\tname = 'and ' + name;\n\t\t\t\t}\n\t\t\t\tdelays.push([2000, name]);\n\t\t\t});\n\t\n\t\t\tdelays = delays.concat([[4000, \"You have five seconds to get a suggestion.\"], [1000, \"5\"], [1000, \"4\"], [1000, \"3\"], [1000, \"2\"], [2000, \"1\"], [2000, \"Good.\"], [4000, \"The show will now begin.\"], [4000, \"Lights down.\"], [2000, \"Lights up.\"]]);\n\t\n\t\t\tvar total = 0;\n\t\t\tdelays.forEach(function (o, i) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t_this.message = o[1];\n\t\t\t\t}, total);\n\t\t\t\ttotal += o[0];\n\t\t\t});\n\t\t\tsetTimeout(function () {\n\t\t\t\t_this.step.set('rules');\n\t\t\t}, total);\n\t\t}\n\t};\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _TypeAndSay = __webpack_require__(50);\n\t\n\tvar _TypeAndSay2 = _interopRequireDefault(_TypeAndSay);\n\t\n\tvar _Strategies = __webpack_require__(26);\n\t\n\tvar _Strategies2 = _interopRequireDefault(_Strategies);\n\t\n\tvar _lodash = __webpack_require__(12);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t__webpack_require__(13);\n\tvar alert01 = new Howl({ src: 'http://localhost:8082/static/sounds/alert01.ogg' });\n\tvar alert02 = new Howl({ src: 'http://localhost:8082/static/sounds/alert02.ogg' });\n\tvar threeBeeps = new Howl({ src: 'http://localhost:8082/static/sounds/threeBeeps.ogg' });\n\tvar oneBoop = new Howl({ src: 'http://localhost:8082/static/sounds/oneBoop.ogg' });\n\tvar endSong = new Howl({ src: 'http://localhost:8082/static/sounds/Who Likes to Party.mp3' });\n\tvar heartOfCourage = new Howl({ src: 'http://localhost:8082/static/sounds/heartOfCourage.mp3' });\n\t\n\tvar addRuleDoneReading = function addRuleDoneReading() {\n\t  setTimeout(function () {\n\t    _data.step = 'board';\n\t    alert02.play();\n\t  }, 500);\n\t};\n\t\n\tvar removeRuleDoneReading = function removeRuleDoneReading() {\n\t  setTimeout(function () {\n\t    _data.step = 'board';\n\t    oneBoop.play();\n\t  }, 500);\n\t};\n\t\n\tvar _data = {\n\t  rules: [],\n\t  step: 'board',\n\t  readRuleText: '',\n\t  doneReading: addRuleDoneReading,\n\t  closerStep: 'closer title',\n\t  closerText: '',\n\t  closerFunc: function closerFunc() {}\n\t};\n\t\n\tfunction addRule(rule) {\n\t  _data.doneReading = addRuleDoneReading;\n\t  _data.step = 'new rule';\n\t  alert01.play();\n\t  _data.rules.push(rule);\n\t\n\t  setTimeout(function () {\n\t    _data.readRuleText = rule.text;\n\t  }, 1500);\n\t  setTimeout(function () {\n\t    _data.step = 'read rule';\n\t  }, 1400);\n\t}\n\t\n\tfunction removeRule(rule) {\n\t\n\t  _data.doneReading = removeRuleDoneReading;\n\t  _data.step = 'remove rule';\n\t  threeBeeps.play();\n\t\n\t  setTimeout(function () {\n\t    _data.readRuleText = rule.removalText;\n\t  }, 1100);\n\t  setTimeout(function () {\n\t    _data.step = 'read rule';\n\t  }, 1000);\n\t\n\t  setTimeout(function () {\n\t    _data.rules.splice(_data.rules.indexOf(rule), 1);\n\t  }, 3100);\n\t}\n\t\n\tfunction removeRandomRule() {\n\t  removeRule(random(_data.rules));\n\t}\n\t\n\tvar selectionCount = {};\n\t\n\tfunction incrementSelectionCount(name) {\n\t  selectionCount[name] = selectionCount[name] ? selectionCount[name] + 1 : 1;\n\t}\n\t\n\tfunction getSelectionCount(name) {\n\t  return typeof selectionCount[name] == 'undefined' ? 0 : selectionCount[name];\n\t}\n\t\n\tfunction sortBySelectionCount(people) {\n\t  return people.sort(function (person1, person2) {\n\t    return getSelectionCount(person1.name) - getSelectionCount(person2.name);\n\t  });\n\t}\n\t\n\tfunction getBySelectionCount(people) {\n\t  shuffle(people);\n\t  sortBySelectionCount(people);\n\t  var person = people[0];\n\t  incrementSelectionCount(person.name);\n\t  return person;\n\t}\n\t\n\tfunction shuffle(a) {\n\t  for (var i = a.length; i; i--) {\n\t    var j = Math.floor(Math.random() * i);\n\t    var _ref = [a[j], a[i - 1]];\n\t    a[i - 1] = _ref[0];\n\t    a[j] = _ref[1];\n\t  }\n\t}\n\t\n\tfunction random(arr) {\n\t  var person = arr[parseInt(Math.random() * arr.length)];\n\t  return person;\n\t}\n\t\n\tfunction randInd(arr) {\n\t  return parseInt(Math.random() * arr.length);\n\t}\n\t\n\tfunction selectRule(rules) {\n\t  var r = Math.random();\n\t  for (var i = 0; i < rules.length; i++) {\n\t    if (rules[i].probCeil > r) return rules[i];\n\t  }\n\t}\n\t\n\tfunction generateReverseRuleText(ruleGen, ruleFills) {\n\t  var index = 0;\n\t  var improviser = void 0,\n\t      uniqueImproviser = void 0,\n\t      getWord = void 0,\n\t      ruleFill = void 0,\n\t      pronoun = void 0;\n\t  improviser = uniqueImproviser = getWord = pronoun = function pronoun() {\n\t    ruleFill = ruleFills[index];\n\t    index++;\n\t    return ruleFill;\n\t  };\n\t  if (ruleGen.reverseTemplate.length == 0) {\n\t    return eval(ruleGen.reverseTemplate);\n\t  }\n\t\n\t  var rule = eval(ruleGen.template);\n\t\n\t  var improviserName = ruleFills[0];\n\t  if (rule.match(improviserName + ' is ')) {\n\t    return rule.replace(improviserName + ' is ', improviserName + ' is no longer ');\n\t  } else if (rule.match(improviserName + ' ')) {\n\t    return rule.replace(improviserName + ' ', improviserName + ' no longer ');\n\t  }\n\t\n\t  return 'The following rule no longer applies: ' + rule;\n\t}\n\t\n\tfunction sentenceify(s) {\n\t  s = s.charAt(0).toUpperCase() + s.slice(1);\n\t  s = s.charAt(s.length - 1) == '.' ? s : s + '.';\n\t  return s;\n\t}\n\t\n\tfunction generateRule(args) {\n\t  var improvisers = args.improvisers;\n\t  var ruleData = args.ruleGens;\n\t  var ruleFills = [];\n\t\n\t  var uniqueImprovisers = _lodash2.default.clone(improvisers);\n\t\n\t  console.log('improvisers', improvisers);\n\t  console.log('uniqueImprovisers', uniqueImprovisers);\n\t\n\t  var improviser = function improviser() {\n\t    var choices = improvisers.concat({\n\t      name: 'everyone',\n\t      pronouns: {\n\t        subjective: 'they',\n\t        objective: 'them',\n\t        possessive: 'their'\n\t      }\n\t    });\n\t    var ans = getBySelectionCount(choices).name;\n\t    ruleFills.push(ans);\n\t    return ans;\n\t  };\n\t\n\t  var uniqueImproviser = function uniqueImproviser() {\n\t    console.log('uniqueImprovisers', uniqueImprovisers);\n\t    var ans = getBySelectionCount(uniqueImprovisers).name;\n\t    uniqueImprovisers.remove(uniqueImprovisers.indexOf(ans));\n\t    ruleFills.push(ans);\n\t    return ans;\n\t  };\n\t\n\t  var getWord = function getWord(category) {\n\t    var ans = random(ruleData.words[category]);\n\t    ruleFills.push(ans);\n\t    return ans;\n\t  };\n\t\n\t  var pronoun = function pronoun(tense) {\n\t    var pronoun = null;\n\t    var person = improvisers.find(function (p) {\n\t      return ruleFills.indexOf(p.name) > -1;\n\t    });\n\t    console.log('person', person);\n\t    if (!person) {\n\t      person = improvisers[0];\n\t      console.log('pronoun uh oh');\n\t    }\n\t    if (tense == 'objective' || tense == 'possessive') {\n\t      pronoun = person.pronouns[tense];\n\t    } else {\n\t      pronoun = person.pronouns.subjective;\n\t    }\n\t    ruleFills.push(pronoun);\n\t    return pronoun;\n\t  };\n\t\n\t  var parseRuleGen = function parseRuleGen(ruleGen) {\n\t    return eval(ruleGen.template);\n\t  };\n\t\n\t  var selectedRule = args.selectedRule ? args.selectedRule : selectRule(ruleData.rules);\n\t  var rule = parseRuleGen(selectedRule);\n\t\n\t  rule = rule.replace('they has', 'they have');\n\t  rule = rule.replace('they is', 'they are');\n\t\n\t  return { text: sentenceify(rule), removalText: sentenceify(generateReverseRuleText(selectedRule, ruleFills)), removing: false };\n\t}\n\t\n\tvar closers = [{\n\t  message: 'The show is over. Congratulations.',\n\t  func: function func() {\n\t    endSong.play();\n\t  }\n\t}];\n\t\n\tfunction closeShow() {\n\t  var closer = random(closers);\n\t  _data.closerFunc = closer.func;\n\t\n\t  _data.step = 'closer';\n\t  alert01.play();\n\t\n\t  setTimeout(function () {\n\t    _data.closerText = closer.message;\n\t  }, 1500);\n\t  setTimeout(function () {\n\t    _data.closerStep = 'read closer';\n\t  }, 1400);\n\t}\n\t\n\tvar closing = false;\n\t\n\tfunction doAction(action) {\n\t  if (closing) return;\n\t  switch (action) {\n\t    case 'default':\n\t      break;\n\t    case 'addRule':\n\t      addRule(generateRule({\n\t        ruleGens: _data.ruleGens,\n\t        improvisers: _data.improvisers\n\t      }));\n\t      break;\n\t    case 'removeRule':\n\t      removeRandomRule();\n\t      break;\n\t    case 'end show':\n\t      closing = true;\n\t      closeShow();\n\t  }\n\t}\n\t\n\texports.default = {\n\t  name: 'rules',\n\t  props: ['ruleGens', 'improvisers'],\n\t  data: function data() {\n\t    return _data;\n\t  },\n\t\n\t  components: {\n\t    TypeAndSay: _TypeAndSay2.default\n\t  },\n\t  methods: {\n\t    newRule: function newRule() {\n\t      threeBeeps.play();\n\t      removeRandomRule();\n\t    },\n\t\n\t    doAction: doAction\n\t  },\n\t  mounted: function mounted() {\n\t    _data.ruleGens = this.ruleGens;\n\t    _data.improvisers = this.improvisers;\n\t    var strategy = new _Strategies2.default.Flip15(10 * 60 * 1000);\n\t\n\t    setInterval(function () {\n\t      doAction(strategy.getAction());\n\t    }, 1000);\n\t  }\n\t};\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _Strategies = __webpack_require__(26);\n\t\n\tvar _Strategies2 = _interopRequireDefault(_Strategies);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _data = {\n\t\tactions: []\n\t};\n\t\n\tfunction simulateShow() {\n\t\tvar strategy = new _Strategies2.default.Flip15(120 * 60 * 1000);\n\t\tvar actions = [];\n\t\tfor (var i = 0; i < strategy.durationOfShow + 2; i++) {\n\t\t\tvar action = strategy.getAction(i);\n\t\t\tif (action != 'nothing') {\n\t\t\t\tactions.push({\n\t\t\t\t\tmessage: action,\n\t\t\t\t\ttime: i,\n\t\t\t\t\trules: strategy.activeRules\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t_data.actions = actions;\n\t}\n\t\n\texports.default = {\n\t\tname: 'Simulation',\n\t\tdata: function data() {\n\t\t\treturn _data;\n\t\t},\n\t\n\t\tmethods: {\n\t\t\tgetActionPos: function getActionPos(action, actions) {\n\t\t\t\tvar maxTime = actions[actions.length - 1].time;\n\t\t\t\treturn action.time / maxTime * 100 + '%';\n\t\t\t},\n\t\t\tformatTime: function formatTime(ms) {\n\t\t\t\tvar x = ms / 1000;\n\t\t\t\tvar seconds = parseInt(x) % 60;\n\t\t\t\tx /= 60;\n\t\t\t\tvar minutes = parseInt(x) % 60;\n\t\t\t\tx /= 60;\n\t\t\t\tvar hours = parseInt(x) % 24;\n\t\t\t\tx /= 24;\n\t\t\t\tvar days = parseInt(x);\n\t\t\t\treturn minutes + ':' + seconds;\n\t\t\t},\n\t\n\t\t\tsimulateShow: simulateShow\n\t\t}\n\t};\n\n/***/ },\n/* 61 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _TypeWriter = __webpack_require__(51);\n\t\n\tvar _TypeWriter2 = _interopRequireDefault(_TypeWriter);\n\t\n\tvar _lodash = __webpack_require__(12);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction speak(text, doneReading) {\n\t\tvar utterance = new SpeechSynthesisUtterance(text);\n\t\tif (doneReading) {\n\t\t\tutterance.onend = doneReading;\n\t\t}\n\t\n\t\tutterance.pitch = .1;\n\t\tutterance.rate = .9;\n\t\tspeechSynthesis.speak(utterance);\n\t}\n\t\n\tvar oldText = '';\n\t\n\tvar speakNewText = _lodash2.default.debounce(function (data) {\n\t\tvar newText = data.$slots.default[0].text;\n\t\tif (oldText != newText) {\n\t\t\toldText = newText;\n\t\t\tspeak(data.$slots.default[0].text, data.doneReading);\n\t\t}\n\t}, 100);\n\t\n\texports.default = {\n\t\tname: 'type-and-say',\n\t\tcomponents: {\n\t\t\tTypeWriter: _TypeWriter2.default\n\t\t},\n\t\tprops: {\n\t\t\t'timeout': { default: 70 },\n\t\t\t'typingVolume': { default: .1 },\n\t\t\t'doneReading': {\n\t\t\t\tdefault: function _default() {}\n\t\t\t}\n\t\t},\n\t\tdata: function data() {\n\t\t\treturn {};\n\t\t},\n\t\tmounted: function mounted() {\n\t\t\tspeakNewText(this);\n\t\t},\n\t\tupdated: function updated() {\n\t\t\tspeakNewText(this);\n\t\t}\n\t};\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\t\n\t__webpack_require__(13);\n\tvar sounds = [new Howl({ src: 'http://localhost:8082/static/sounds/type01.ogg' }), new Howl({ src: 'http://localhost:8082/static/sounds/type02.ogg' }), new Howl({ src: 'http://localhost:8082/static/sounds/type03.ogg' }), new Howl({ src: 'http://localhost:8082/static/sounds/type04.ogg' })];\n\t\n\tvar _data = { text: '' };\n\tvar timeoutIDs = [];\n\t\n\tfunction playSound(volume) {\n\t  if (volume) {\n\t    var i = parseInt(Math.random() * sounds.length);\n\t    sounds[i].volume(volume);\n\t    sounds[i].play();\n\t  }\n\t}\n\t\n\tfunction typeWriter(text, timeout, volume, n) {\n\t  if (n < text.length) {\n\t    _data.text += text.charAt(n);\n\t    playSound(volume);\n\t    n++;\n\t    var timeoutID = setTimeout(function () {\n\t      typeWriter(text, timeout, volume, n);\n\t    }, timeout);\n\t    timeoutIDs.push(timeoutID);\n\t  }\n\t}\n\t\n\tfunction lineWriter(lines, timeout, volume, n) {\n\t  if (n < lines.length) {\n\t    _data.text += '\\n' + lines[n];\n\t    playSound(volume);\n\t    n++;\n\t    var timeoutID = setTimeout(function () {\n\t      lineWriter(lines, timeout, volume, n);\n\t    }, timeout);\n\t    timeoutIDs.push(timeoutID);\n\t  }\n\t}\n\t\n\tfunction print(text, spliton, volume, timeout) {\n\t  timeoutIDs = [];\n\t  if (spliton) {\n\t    lineWriter(text.split(spliton), timeout, volume, 0);\n\t  } else {\n\t    typeWriter(text, timeout, volume, 0);\n\t  }\n\t}\n\t\n\tfunction clear() {\n\t  _data.text = '';\n\t  timeoutIDs.forEach(function (id) {\n\t    clearTimeout(id);\n\t  });\n\t}\n\t\n\tvar oldText = '';\n\t\n\texports.default = {\n\t  name: 'type-writer',\n\t  props: {\n\t    'timeout': { default: 100 },\n\t    'spliton': { default: null },\n\t    'volume': { default: 1.0 }\n\t  },\n\t  data: function data() {\n\t    return _data;\n\t  },\n\t  mounted: function mounted() {\n\t    print(this.$slots.default[0].text, this.spliton, this.volume, this.timeout);\n\t  },\n\t  updated: function updated() {\n\t    var newText = this.$slots.default[0].text;\n\t    if (oldText != newText) {\n\t      oldText = newText;\n\t      clear();\n\t      print(this.$slots.default[0].text, this.spliton, this.volume, this.timeout);\n\t    }\n\t  },\n\t  destroyed: function destroyed() {\n\t    clear();\n\t  }\n\t};\n\n/***/ },\n/* 63 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = \"\\n/* HCI_IBS protocol messages */\\n#define HCI_IBS_SLEEP_IND\\t0xFE\\n#define HCI_IBS_WAKE_IND\\t0xFD\\n#define HCI_IBS_WAKE_ACK\\t0xFC\\n#define HCI_MAX_IBS_SIZE\\t10\\n\\n/* Controller states */\\n#define STATE_IN_BAND_SLEEP_ENABLED\\t1\\n\\n#define IBS_WAKE_RETRANS_TIMEOUT_MS\\t100\\n#define IBS_TX_IDLE_TIMEOUT_MS\\t\\t2000\\n#define BAUDRATE_SETTLE_TIMEOUT_MS\\t300\\n\\n/* HCI_IBS transmit side sleep protocol states */\\nenum tx_ibs_states {\\n\\tHCI_IBS_TX_ASLEEP,\\n\\tHCI_IBS_TX_WAKING,\\n\\tHCI_IBS_TX_AWAKE,\\n};\\n\\n/* HCI_IBS receive side sleep protocol states */\\nenum rx_states {\\n\\tHCI_IBS_RX_ASLEEP,\\n\\tHCI_IBS_RX_AWAKE,\\n};\\n\\n/* HCI_IBS transmit and receive side clock state vote */\\nenum hci_ibs_clock_state_vote {\\n\\tHCI_IBS_VOTE_STATS_UPDATE,\\n\\tHCI_IBS_TX_VOTE_CLOCK_ON,\\n\\tHCI_IBS_TX_VOTE_CLOCK_OFF,\\n\\tHCI_IBS_RX_VOTE_CLOCK_ON,\\n\\tHCI_IBS_RX_VOTE_CLOCK_OFF,\\n};\\n\\nstruct qca_data {\\n\\tstruct hci_uart *hu;\\n\\tstruct sk_buff *rx_skb;\\n\\tstruct sk_buff_head txq;\\n\\tstruct sk_buff_head tx_wait_q;\\t/* HCI_IBS wait queue\\t*/\\n\\tspinlock_t hci_ibs_lock;\\t/* HCI_IBS state lock\\t*/\\n\\tu8 tx_ibs_state;\\t/* HCI_IBS transmit side power state*/\\n\\tu8 rx_ibs_state;\\t/* HCI_IBS receive side power state */\\n\\tbool tx_vote;\\t\\t/* Clock must be on for TX */\\n\\tbool rx_vote;\\t\\t/* Clock must be on for RX */\\n\\tstruct timer_list tx_idle_timer;\\n\\tu32 tx_idle_delay;\\n\\tstruct timer_list wake_retrans_timer;\\n\\tu32 wake_retrans;\\n\\tstruct workqueue_struct *workqueue;\\n\\tstruct work_struct ws_awake_rx;\\n\\tstruct work_struct ws_awake_device;\\n\\tstruct work_struct ws_rx_vote_off;\\n\\tstruct work_struct ws_tx_vote_off;\\n\\tunsigned long flags;\\n\\n\\t/* For debugging purpose */\\n\\tu64 ibs_sent_wacks;\\n\\tu64 ibs_sent_slps;\\n\\tu64 ibs_sent_wakes;\\n\\tu64 ibs_recv_wacks;\\n\\tu64 ibs_recv_slps;\\n\\tu64 ibs_recv_wakes;\\n\\tu64 vote_last_jif;\\n\\tu32 vote_on_ms;\\n\\tu32 vote_off_ms;\\n\\tu64 tx_votes_on;\\n\\tu64 rx_votes_on;\\n\\tu64 tx_votes_off;\\n\\tu64 rx_votes_off;\\n\\tu64 votes_on;\\n\\tu64 votes_off;\\n};\\n\\nstatic void __serial_clock_on(struct tty_struct *tty)\\n{\\n\\t/* TODO: Some chipset requires to enable UART clock on client\\n\\t * side to save power consumption or manual work is required.\\n\\t * Please put your code to control UART clock here if needed\\n\\t */\\n}\\n\\nstatic void __serial_clock_off(struct tty_struct *tty)\\n{\\n\\t/* TODO: Some chipset requires to disable UART clock on client\\n\\t * side to save power consumption or manual work is required.\\n\\t * Please put your code to control UART clock off here if needed\\n\\t */\\n}\\n\\n/* serial_clock_vote needs to be called with the ibs lock held */\\nstatic void serial_clock_vote(unsigned long vote, struct hci_uart *hu)\\n{\\n\\tstruct qca_data *qca = hu->priv;\\n\\tunsigned int diff;\\n\\n\\tbool old_vote = (qca->tx_vote | qca->rx_vote);\\n\\tbool new_vote;\\n\\n\\tswitch (vote) {\\n\\tcase HCI_IBS_VOTE_STATS_UPDATE:\\n\\t\\tdiff = jiffies_to_msecs(jiffies - qca->vote_last_jif);\\n\\n\\t\\tif (old_vote)\\n\\t\\t\\tqca->vote_off_ms += diff;\\n\\t\\telse\\n\\t\\t\\tqca->vote_on_ms += diff;\\n\\t\\treturn;\\n\\n\\tcase HCI_IBS_TX_VOTE_CLOCK_ON:\\n\\t\\tqca->tx_vote = true;\\n\\t\\tqca->tx_votes_on++;\\n\\t\\tnew_vote = true;\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_RX_VOTE_CLOCK_ON:\\n\\t\\tqca->rx_vote = true;\\n\\t\\tqca->rx_votes_on++;\\n\\t\\tnew_vote = true;\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_VOTE_CLOCK_OFF:\\n\\t\\tqca->tx_vote = false;\\n\\t\\tqca->tx_votes_off++;\\n\\t\\tnew_vote = qca->rx_vote | qca->tx_vote;\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_RX_VOTE_CLOCK_OFF:\\n\\t\\tqca->rx_vote = false;\\n\\t\\tqca->rx_votes_off++;\\n\\t\\tnew_vote = qca->rx_vote | qca->tx_vote;\\n\\t\\tbreak;\\n\\n\\tdefault:\\n\\t\\tBT_ERR(\\\"Voting irregularity\\\");\\n\\t\\treturn;\\n\\t}\\n\\n\\tif (new_vote != old_vote) {\\n\\t\\tif (new_vote)\\n\\t\\t\\t__serial_clock_on(hu->tty);\\n\\t\\telse\\n\\t\\t\\t__serial_clock_off(hu->tty);\\n\\n\\t\\tBT_DBG(\\\"Vote serial clock %s(%s)\\\", new_vote ? \\\"true\\\" : \\\"false\\\",\\n\\t\\t       vote ? \\\"true\\\" : \\\"false\\\");\\n\\n\\t\\tdiff = jiffies_to_msecs(jiffies - qca->vote_last_jif);\\n\\n\\t\\tif (new_vote) {\\n\\t\\t\\tqca->votes_on++;\\n\\t\\t\\tqca->vote_off_ms += diff;\\n\\t\\t} else {\\n\\t\\t\\tqca->votes_off++;\\n\\t\\t\\tqca->vote_on_ms += diff;\\n\\t\\t}\\n\\t\\tqca->vote_last_jif = jiffies;\\n\\t}\\n}\\n\\n/* Builds and sends an HCI_IBS command packet.\\n * These are very simple packets with only 1 cmd byte.\\n */\\nstatic int send_hci_ibs_cmd(u8 cmd, struct hci_uart *hu)\\n{\\n\\tint err = 0;\\n\\tstruct sk_buff *skb = NULL;\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p send hci ibs cmd 0x%x\\\", hu, cmd);\\n\\n\\tskb = bt_skb_alloc(1, GFP_ATOMIC);\\n\\tif (!skb) {\\n\\t\\tBT_ERR(\\\"Failed to allocate memory for HCI_IBS packet\\\");\\n\\t\\treturn -ENOMEM;\\n\\t}\\n\\n\\t/* Assign HCI_IBS type */\\n\\t*skb_put(skb, 1) = cmd;\\n\\n\\tskb_queue_tail(&qca->txq, skb);\\n\\n\\treturn err;\\n}\\n\\nstatic void qca_wq_awake_device(struct work_struct *work)\\n{\\n\\tstruct qca_data *qca = container_of(work, struct qca_data,\\n\\t\\t\\t\\t\\t    ws_awake_device);\\n\\tstruct hci_uart *hu = qca->hu;\\n\\tunsigned long retrans_delay;\\n\\n\\tBT_DBG(\\\"hu %p wq awake device\\\", hu);\\n\\n\\t/* Vote for serial clock */\\n\\tserial_clock_vote(HCI_IBS_TX_VOTE_CLOCK_ON, hu);\\n\\n\\tspin_lock(&qca->hci_ibs_lock);\\n\\n\\t/* Send wake indication to device */\\n\\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_IND, hu) < 0)\\n\\t\\tBT_ERR(\\\"Failed to send WAKE to device\\\");\\n\\n\\tqca->ibs_sent_wakes++;\\n\\n\\t/* Start retransmit timer */\\n\\tretrans_delay = msecs_to_jiffies(qca->wake_retrans);\\n\\tmod_timer(&qca->wake_retrans_timer, jiffies + retrans_delay);\\n\\n\\tspin_unlock(&qca->hci_ibs_lock);\\n\\n\\t/* Actually send the packets */\\n\\thci_uart_tx_wakeup(hu);\\n}\\n\\nstatic void qca_wq_awake_rx(struct work_struct *work)\\n{\\n\\tstruct qca_data *qca = container_of(work, struct qca_data,\\n\\t\\t\\t\\t\\t    ws_awake_rx);\\n\\tstruct hci_uart *hu = qca->hu;\\n\\n\\tBT_DBG(\\\"hu %p wq awake rx\\\", hu);\\n\\n\\tserial_clock_vote(HCI_IBS_RX_VOTE_CLOCK_ON, hu);\\n\\n\\tspin_lock(&qca->hci_ibs_lock);\\n\\tqca->rx_ibs_state = HCI_IBS_RX_AWAKE;\\n\\n\\t/* Always acknowledge device wake up,\\n\\t * sending IBS message doesn't count as TX ON.\\n\\t */\\n\\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_ACK, hu) < 0)\\n\\t\\tBT_ERR(\\\"Failed to acknowledge device wake up\\\");\\n\\n\\tqca->ibs_sent_wacks++;\\n\\n\\tspin_unlock(&qca->hci_ibs_lock);\\n\\n\\t/* Actually send the packets */\\n\\thci_uart_tx_wakeup(hu);\\n}\\n\\nstatic void qca_wq_serial_rx_clock_vote_off(struct work_struct *work)\\n{\\n\\tstruct qca_data *qca = container_of(work, struct qca_data,\\n\\t\\t\\t\\t\\t    ws_rx_vote_off);\\n\\tstruct hci_uart *hu = qca->hu;\\n\\n\\tBT_DBG(\\\"hu %p rx clock vote off\\\", hu);\\n\\n\\tserial_clock_vote(HCI_IBS_RX_VOTE_CLOCK_OFF, hu);\\n}\\n\\nstatic void qca_wq_serial_tx_clock_vote_off(struct work_struct *work)\\n{\\n\\tstruct qca_data *qca = container_of(work, struct qca_data,\\n\\t\\t\\t\\t\\t    ws_tx_vote_off);\\n\\tstruct hci_uart *hu = qca->hu;\\n\\n\\tBT_DBG(\\\"hu %p tx clock vote off\\\", hu);\\n\\n\\t/* Run HCI tx handling unlocked */\\n\\thci_uart_tx_wakeup(hu);\\n\\n\\t/* Now that message queued to tty driver, vote for tty clocks off.\\n\\t * It is up to the tty driver to pend the clocks off until tx done.\\n\\t */\\n\\tserial_clock_vote(HCI_IBS_TX_VOTE_CLOCK_OFF, hu);\\n}\\n\\nstatic void hci_ibs_tx_idle_timeout(unsigned long arg)\\n{\\n\\tstruct hci_uart *hu = (struct hci_uart *)arg;\\n\\tstruct qca_data *qca = hu->priv;\\n\\tunsigned long flags;\\n\\n\\tBT_DBG(\\\"hu %p idle timeout in %d state\\\", hu, qca->tx_ibs_state);\\n\\n\\tspin_lock_irqsave_nested(&qca->hci_ibs_lock,\\n\\t\\t\\t\\t flags, SINGLE_DEPTH_NESTING);\\n\\n\\tswitch (qca->tx_ibs_state) {\\n\\tcase HCI_IBS_TX_AWAKE:\\n\\t\\t/* TX_IDLE, go to SLEEP */\\n\\t\\tif (send_hci_ibs_cmd(HCI_IBS_SLEEP_IND, hu) < 0) {\\n\\t\\t\\tBT_ERR(\\\"Failed to send SLEEP to device\\\");\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tqca->tx_ibs_state = HCI_IBS_TX_ASLEEP;\\n\\t\\tqca->ibs_sent_slps++;\\n\\t\\tqueue_work(qca->workqueue, &qca->ws_tx_vote_off);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_ASLEEP:\\n\\tcase HCI_IBS_TX_WAKING:\\n\\t\\t/* Fall through */\\n\\n\\tdefault:\\n\\t\\tBT_ERR(\\\"Spurrious timeout tx state %d\\\", qca->tx_ibs_state);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n}\\n\\nstatic void hci_ibs_wake_retrans_timeout(unsigned long arg)\\n{\\n\\tstruct hci_uart *hu = (struct hci_uart *)arg;\\n\\tstruct qca_data *qca = hu->priv;\\n\\tunsigned long flags, retrans_delay;\\n\\tbool retransmit = false;\\n\\n\\tBT_DBG(\\\"hu %p wake retransmit timeout in %d state\\\",\\n\\t\\thu, qca->tx_ibs_state);\\n\\n\\tspin_lock_irqsave_nested(&qca->hci_ibs_lock,\\n\\t\\t\\t\\t flags, SINGLE_DEPTH_NESTING);\\n\\n\\tswitch (qca->tx_ibs_state) {\\n\\tcase HCI_IBS_TX_WAKING:\\n\\t\\t/* No WAKE_ACK, retransmit WAKE */\\n\\t\\tretransmit = true;\\n\\t\\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_IND, hu) < 0) {\\n\\t\\t\\tBT_ERR(\\\"Failed to acknowledge device wake up\\\");\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tqca->ibs_sent_wakes++;\\n\\t\\tretrans_delay = msecs_to_jiffies(qca->wake_retrans);\\n\\t\\tmod_timer(&qca->wake_retrans_timer, jiffies + retrans_delay);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_ASLEEP:\\n\\tcase HCI_IBS_TX_AWAKE:\\n\\t\\t/* Fall through */\\n\\n\\tdefault:\\n\\t\\tBT_ERR(\\\"Spurrious timeout tx state %d\\\", qca->tx_ibs_state);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n\\n\\tif (retransmit)\\n\\t\\thci_uart_tx_wakeup(hu);\\n}\\n\\n/* Initialize protocol */\\nstatic int qca_open(struct hci_uart *hu)\\n{\\n\\tstruct qca_data *qca;\\n\\n\\tBT_DBG(\\\"hu %p qca_open\\\", hu);\\n\\n\\tqca = kzalloc(sizeof(struct qca_data), GFP_ATOMIC);\\n\\tif (!qca)\\n\\t\\treturn -ENOMEM;\\n\\n\\tskb_queue_head_init(&qca->txq);\\n\\tskb_queue_head_init(&qca->tx_wait_q);\\n\\tspin_lock_init(&qca->hci_ibs_lock);\\n\\tqca->workqueue = alloc_ordered_workqueue(\\\"qca_wq\\\", 0);\\n\\tif (!qca->workqueue) {\\n\\t\\tBT_ERR(\\\"QCA Workqueue not initialized properly\\\");\\n\\t\\tkfree(qca);\\n\\t\\treturn -ENOMEM;\\n\\t}\\n\\n\\tINIT_WORK(&qca->ws_awake_rx, qca_wq_awake_rx);\\n\\tINIT_WORK(&qca->ws_awake_device, qca_wq_awake_device);\\n\\tINIT_WORK(&qca->ws_rx_vote_off, qca_wq_serial_rx_clock_vote_off);\\n\\tINIT_WORK(&qca->ws_tx_vote_off, qca_wq_serial_tx_clock_vote_off);\\n\\n\\tqca->hu = hu;\\n\\n\\t/* Assume we start with both sides asleep -- extra wakes OK */\\n\\tqca->tx_ibs_state = HCI_IBS_TX_ASLEEP;\\n\\tqca->rx_ibs_state = HCI_IBS_RX_ASLEEP;\\n\\n\\t/* clocks actually on, but we start votes off */\\n\\tqca->tx_vote = false;\\n\\tqca->rx_vote = false;\\n\\tqca->flags = 0;\\n\\n\\tqca->ibs_sent_wacks = 0;\\n\\tqca->ibs_sent_slps = 0;\\n\\tqca->ibs_sent_wakes = 0;\\n\\tqca->ibs_recv_wacks = 0;\\n\\tqca->ibs_recv_slps = 0;\\n\\tqca->ibs_recv_wakes = 0;\\n\\tqca->vote_last_jif = jiffies;\\n\\tqca->vote_on_ms = 0;\\n\\tqca->vote_off_ms = 0;\\n\\tqca->votes_on = 0;\\n\\tqca->votes_off = 0;\\n\\tqca->tx_votes_on = 0;\\n\\tqca->tx_votes_off = 0;\\n\\tqca->rx_votes_on = 0;\\n\\tqca->rx_votes_off = 0;\\n\\n\\thu->priv = qca;\\n\\n\\tsetup_timer(&qca->wake_retrans_timer, hci_ibs_wake_retrans_timeout,\\n\\t\\t    (u_long)hu);\\n\\tqca->wake_retrans = IBS_WAKE_RETRANS_TIMEOUT_MS;\\n\\n\\tsetup_timer(&qca->tx_idle_timer, hci_ibs_tx_idle_timeout, (u_long)hu);\\n\\tqca->tx_idle_delay = IBS_TX_IDLE_TIMEOUT_MS;\\n\\n\\tBT_DBG(\\\"HCI_UART_QCA open, tx_idle_delay=%u, wake_retrans=%u\\\",\\n\\t       qca->tx_idle_delay, qca->wake_retrans);\\n\\n\\treturn 0;\\n}\\n\\nstatic void qca_debugfs_init(struct hci_dev *hdev)\\n{\\n\\tstruct hci_uart *hu = hci_get_drvdata(hdev);\\n\\tstruct qca_data *qca = hu->priv;\\n\\tstruct dentry *ibs_dir;\\n\\tumode_t mode;\\n\\n\\tif (!hdev->debugfs)\\n\\t\\treturn;\\n\\n\\tibs_dir = debugfs_create_dir(\\\"ibs\\\", hdev->debugfs);\\n\\n\\t/* read only */\\n\\tmode = S_IRUGO;\\n\\tdebugfs_create_u8(\\\"tx_ibs_state\\\", mode, ibs_dir, &qca->tx_ibs_state);\\n\\tdebugfs_create_u8(\\\"rx_ibs_state\\\", mode, ibs_dir, &qca->rx_ibs_state);\\n\\tdebugfs_create_u64(\\\"ibs_sent_sleeps\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_sent_slps);\\n\\tdebugfs_create_u64(\\\"ibs_sent_wakes\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_sent_wakes);\\n\\tdebugfs_create_u64(\\\"ibs_sent_wake_acks\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_sent_wacks);\\n\\tdebugfs_create_u64(\\\"ibs_recv_sleeps\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_recv_slps);\\n\\tdebugfs_create_u64(\\\"ibs_recv_wakes\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_recv_wakes);\\n\\tdebugfs_create_u64(\\\"ibs_recv_wake_acks\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_recv_wacks);\\n\\tdebugfs_create_bool(\\\"tx_vote\\\", mode, ibs_dir, &qca->tx_vote);\\n\\tdebugfs_create_u64(\\\"tx_votes_on\\\", mode, ibs_dir, &qca->tx_votes_on);\\n\\tdebugfs_create_u64(\\\"tx_votes_off\\\", mode, ibs_dir, &qca->tx_votes_off);\\n\\tdebugfs_create_bool(\\\"rx_vote\\\", mode, ibs_dir, &qca->rx_vote);\\n\\tdebugfs_create_u64(\\\"rx_votes_on\\\", mode, ibs_dir, &qca->rx_votes_on);\\n\\tdebugfs_create_u64(\\\"rx_votes_off\\\", mode, ibs_dir, &qca->rx_votes_off);\\n\\tdebugfs_create_u64(\\\"votes_on\\\", mode, ibs_dir, &qca->votes_on);\\n\\tdebugfs_create_u64(\\\"votes_off\\\", mode, ibs_dir, &qca->votes_off);\\n\\tdebugfs_create_u32(\\\"vote_on_ms\\\", mode, ibs_dir, &qca->vote_on_ms);\\n\\tdebugfs_create_u32(\\\"vote_off_ms\\\", mode, ibs_dir, &qca->vote_off_ms);\\n\\n\\t/* read/write */\\n\\tmode = S_IRUGO | S_IWUSR;\\n\\tdebugfs_create_u32(\\\"wake_retrans\\\", mode, ibs_dir, &qca->wake_retrans);\\n\\tdebugfs_create_u32(\\\"tx_idle_delay\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->tx_idle_delay);\\n}\\n\\n/* Flush protocol data */\\nstatic int qca_flush(struct hci_uart *hu)\\n{\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p qca flush\\\", hu);\\n\\n\\tskb_queue_purge(&qca->tx_wait_q);\\n\\tskb_queue_purge(&qca->txq);\\n\\n\\treturn 0;\\n}\\n\\n/* Close protocol */\\nstatic int qca_close(struct hci_uart *hu)\\n{\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p qca close\\\", hu);\\n\\n\\tserial_clock_vote(HCI_IBS_VOTE_STATS_UPDATE, hu);\\n\\n\\tskb_queue_purge(&qca->tx_wait_q);\\n\\tskb_queue_purge(&qca->txq);\\n\\tdel_timer(&qca->tx_idle_timer);\\n\\tdel_timer(&qca->wake_retrans_timer);\\n\\tdestroy_workqueue(qca->workqueue);\\n\\tqca->hu = NULL;\\n\\n\\tkfree_skb(qca->rx_skb);\\n\\n\\thu->priv = NULL;\\n\\n\\tkfree(qca);\\n\\n\\treturn 0;\\n}\\n\\n/* Called upon a wake-up-indication from the device.\\n */\\nstatic void device_want_to_wakeup(struct hci_uart *hu)\\n{\\n\\tunsigned long flags;\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p want to wake up\\\", hu);\\n\\n\\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\\n\\n\\tqca->ibs_recv_wakes++;\\n\\n\\tswitch (qca->rx_ibs_state) {\\n\\tcase HCI_IBS_RX_ASLEEP:\\n\\t\\t/* Make sure clock is on - we may have turned clock off since\\n\\t\\t * receiving the wake up indicator awake rx clock.\\n\\t\\t */\\n\\t\\tqueue_work(qca->workqueue, &qca->ws_awake_rx);\\n\\t\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n\\t\\treturn;\\n\\n\\tcase HCI_IBS_RX_AWAKE:\\n\\t\\t/* Always acknowledge device wake up,\\n\\t\\t * sending IBS message doesn't count as TX ON.\\n\\t\\t */\\n\\t\\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_ACK, hu) < 0) {\\n\\t\\t\\tBT_ERR(\\\"Failed to acknowledge device wake up\\\");\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tqca->ibs_sent_wacks++;\\n\\t\\tbreak;\\n\\n\\tdefault:\\n\\t\\t/* Any other state is illegal */\\n\\t\\tBT_ERR(\\\"Received HCI_IBS_WAKE_IND in rx state %d\\\",\\n\\t\\t       qca->rx_ibs_state);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n\\n\\t/* Actually send the packets */\\n\\thci_uart_tx_wakeup(hu);\\n}\\n\\n/* Called upon a sleep-indication from the device.\\n */\\nstatic void device_want_to_sleep(struct hci_uart *hu)\\n{\\n\\tunsigned long flags;\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p want to sleep\\\", hu);\\n\\n\\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\\n\\n\\tqca->ibs_recv_slps++;\\n\\n\\tswitch (qca->rx_ibs_state) {\\n\\tcase HCI_IBS_RX_AWAKE:\\n\\t\\t/* Update state */\\n\\t\\tqca->rx_ibs_state = HCI_IBS_RX_ASLEEP;\\n\\t\\t/* Vote off rx clock under workqueue */\\n\\t\\tqueue_work(qca->workqueue, &qca->ws_rx_vote_off);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_RX_ASLEEP:\\n\\t\\t/* Fall through */\\n\\n\\tdefault:\\n\\t\\t/* Any other state is illegal */\\n\\t\\tBT_ERR(\\\"Received HCI_IBS_SLEEP_IND in rx state %d\\\",\\n\\t\\t       qca->rx_ibs_state);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n}\\n\\n/* Called upon wake-up-acknowledgement from the device\\n */\\nstatic void device_woke_up(struct hci_uart *hu)\\n{\\n\\tunsigned long flags, idle_delay;\\n\\tstruct qca_data *qca = hu->priv;\\n\\tstruct sk_buff *skb = NULL;\\n\\n\\tBT_DBG(\\\"hu %p woke up\\\", hu);\\n\\n\\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\\n\\n\\tqca->ibs_recv_wacks++;\\n\\n\\tswitch (qca->tx_ibs_state) {\\n\\tcase HCI_IBS_TX_AWAKE:\\n\\t\\t/* Expect one if we send 2 WAKEs */\\n\\t\\tBT_DBG(\\\"Received HCI_IBS_WAKE_ACK in tx state %d\\\",\\n\\t\\t       qca->tx_ibs_state);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_WAKING:\\n\\t\\t/* Send pending packets */\\n\\t\\twhile ((skb = skb_dequeue(&qca->tx_wait_q)))\\n\\t\\t\\tskb_queue_tail(&qca->txq, skb);\\n\\n\\t\\t/* Switch timers and change state to HCI_IBS_TX_AWAKE */\\n\\t\\tdel_timer(&qca->wake_retrans_timer);\\n\\t\\tidle_delay = msecs_to_jiffies(qca->tx_idle_delay);\\n\\t\\tmod_timer(&qca->tx_idle_timer, jiffies + idle_delay);\\n\\t\\tqca->tx_ibs_state = HCI_IBS_TX_AWAKE;\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_ASLEEP:\\n\\t\\t/* Fall through */\\n\\n\\tdefault:\\n\\t\\tBT_ERR(\\\"Received HCI_IBS_WAKE_ACK in tx state %d\\\",\\n\\t\\t       qca->tx_ibs_state);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n\\n\\t/* Actually send the packets */\\n\\thci_uart_tx_wakeup(hu);\\n}\\n\\n/* Enqueue frame for transmittion (padding, crc, etc) may be called from\\n * two simultaneous tasklets.\\n */\\nstatic int qca_enqueue(struct hci_uart *hu, struct sk_buff *skb)\\n{\\n\\tunsigned long flags = 0, idle_delay;\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p qca enq skb %p tx_ibs_state %d\\\", hu, skb,\\n\\t       qca->tx_ibs_state);\\n\\n\\t/* Prepend skb with frame type */\\n\\tmemcpy(skb_push(skb, 1), &hci_skb_pkt_type(skb), 1);\\n\\n\\t/* Don't go to sleep in middle of patch download or\\n\\t * Out-Of-Band(GPIOs control) sleep is selected.\\n\\t */\\n\\tif (!test_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags)) {\\n\\t\\tskb_queue_tail(&qca->txq, skb);\\n\\t\\treturn 0;\\n\\t}\\n\\n\\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\\n\\n\\t/* Act according to current state */\\n\\tswitch (qca->tx_ibs_state) {\\n\\tcase HCI_IBS_TX_AWAKE:\\n\\t\\tBT_DBG(\\\"Device awake, sending normally\\\");\\n\\t\\tskb_queue_tail(&qca->txq, skb);\\n\\t\\tidle_delay = msecs_to_jiffies(qca->tx_idle_delay);\\n\\t\\tmod_timer(&qca->tx_idle_timer, jiffies + idle_delay);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_ASLEEP:\\n\\t\\tBT_DBG(\\\"Device asleep, waking up and queueing packet\\\");\\n\\t\\t/* Save packet for later */\\n\\t\\tskb_queue_tail(&qca->tx_wait_q, skb);\\n\\n\\t\\tqca->tx_ibs_state = HCI_IBS_TX_WAKING;\\n\\t\\t/* Schedule a work queue to wake up device */\\n\\t\\tqueue_work(qca->workqueue, &qca->ws_awake_device);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_WAKING:\\n\\t\\tBT_DBG(\\\"Device waking up, queueing packet\\\");\\n\\t\\t/* Transient state; just keep packet for later */\\n\\t\\tskb_queue_tail(&qca->tx_wait_q, skb);\\n\\t\\tbreak;\\n\\n\\tdefault:\\n\\t\\tBT_ERR(\\\"Illegal tx state: %d (losing packet)\\\",\\n\\t\\t       qca->tx_ibs_state);\\n\\t\\tkfree_skb(skb);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n\\n\\treturn 0;\\n}\\n\\nstatic int qca_ibs_sleep_ind(struct hci_dev *hdev, struct sk_buff *skb)\\n{\\n\\tstruct hci_uart *hu = hci_get_drvdata(hdev);\\n\\n\\tBT_DBG(\\\"hu %p recv hci ibs cmd 0x%x\\\", hu, HCI_IBS_SLEEP_IND);\\n\\n\\tdevice_want_to_sleep(hu);\\n\\n\\tkfree_skb(skb);\\n\\treturn 0;\\n}\\n\\nstatic int qca_ibs_wake_ind(struct hci_dev *hdev, struct sk_buff *skb)\\n{\\n\\tstruct hci_uart *hu = hci_get_drvdata(hdev);\\n\\n\\tBT_DBG(\\\"hu %p recv hci ibs cmd 0x%x\\\", hu, HCI_IBS_WAKE_IND);\\n\\n\\tdevice_want_to_wakeup(hu);\\n\\n\\tkfree_skb(skb);\\n\\treturn 0;\\n}\\n\\nstatic int qca_ibs_wake_ack(struct hci_dev *hdev, struct sk_buff *skb)\\n{\\n\\tstruct hci_uart *hu = hci_get_drvdata(hdev);\\n\\n\\tBT_DBG(\\\"hu %p recv hci ibs cmd 0x%x\\\", hu, HCI_IBS_WAKE_ACK);\\n\\n\\tdevice_woke_up(hu);\\n\\n\\tkfree_skb(skb);\\n\\treturn 0;\\n}\\n\\n#define QCA_IBS_SLEEP_IND_EVENT \\t.type = HCI_IBS_SLEEP_IND, \\t.hlen = 0, \\t.loff = 0, \\t.lsize = 0, \\t.maxlen = HCI_MAX_IBS_SIZE\\n\\n#define QCA_IBS_WAKE_IND_EVENT \\t.type = HCI_IBS_WAKE_IND, \\t.hlen = 0, \\t.loff = 0, \\t.lsize = 0, \\t.maxlen = HCI_MAX_IBS_SIZE\\n\\n#define QCA_IBS_WAKE_ACK_EVENT \\t.type = HCI_IBS_WAKE_ACK, \\t.hlen = 0, \\t.loff = 0, \\t.lsize = 0, \\t.maxlen = HCI_MAX_IBS_SIZE\\n\\nstatic const struct h4_recv_pkt qca_recv_pkts[] = {\\n\\t{ H4_RECV_ACL,             .recv = hci_recv_frame    },\\n\\t{ H4_RECV_SCO,             .recv = hci_recv_frame    },\\n\\t{ H4_RECV_EVENT,           .recv = hci_recv_frame    },\\n\\t{ QCA_IBS_WAKE_IND_EVENT,  .recv = qca_ibs_wake_ind  },\\n\\t{ QCA_IBS_WAKE_ACK_EVENT,  .recv = qca_ibs_wake_ack  },\\n\\t{ QCA_IBS_SLEEP_IND_EVENT, .recv = qca_ibs_sleep_ind },\\n};\\n\\nstatic int qca_recv(struct hci_uart *hu, const void *data, int count)\\n{\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tif (!test_bit(HCI_UART_REGISTERED, &hu->flags))\\n\\t\\treturn -EUNATCH;\\n\\n\\tqca->rx_skb = h4_recv_buf(hu->hdev, qca->rx_skb, data, count,\\n\\t\\t\\t\\t  qca_recv_pkts, ARRAY_SIZE(qca_recv_pkts));\\n\\tif (IS_ERR(qca->rx_skb)) {\\n\\t\\tint err = PTR_ERR(qca->rx_skb);\\n\\t\\tBT_ERR(\\\"%s: Frame reassembly failed (%d)\\\", hu->hdev->name, err);\\n\\t\\tqca->rx_skb = NULL;\\n\\t\\treturn err;\\n\\t}\\n\\n\\treturn count;\\n}\\n\\nstatic struct sk_buff *qca_dequeue(struct hci_uart *hu)\\n{\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\treturn skb_dequeue(&qca->txq);\\n}\\n\\nstatic uint8_t qca_get_baudrate_value(int speed)\\n{\\n\\tswitch (speed) {\\n\\tcase 9600:\\n\\t\\treturn QCA_BAUDRATE_9600;\\n\\tcase 19200:\\n\\t\\treturn QCA_BAUDRATE_19200;\\n\\tcase 38400:\\n\\t\\treturn QCA_BAUDRATE_38400;\\n\\tcase 57600:\\n\\t\\treturn QCA_BAUDRATE_57600;\\n\\tcase 115200:\\n\\t\\treturn QCA_BAUDRATE_115200;\\n\\tcase 230400:\\n\\t\\treturn QCA_BAUDRATE_230400;\\n\\tcase 460800:\\n\\t\\treturn QCA_BAUDRATE_460800;\\n\\tcase 500000:\\n\\t\\treturn QCA_BAUDRATE_500000;\\n\\tcase 921600:\\n\\t\\treturn QCA_BAUDRATE_921600;\\n\\tcase 1000000:\\n\\t\\treturn QCA_BAUDRATE_1000000;\\n\\tcase 2000000:\\n\\t\\treturn QCA_BAUDRATE_2000000;\\n\\tcase 3000000:\\n\\t\\treturn QCA_BAUDRATE_3000000;\\n\\tcase 3500000:\\n\\t\\treturn QCA_BAUDRATE_3500000;\\n\\tdefault:\\n\\t\\treturn QCA_BAUDRATE_115200;\\n\\t}\\n}\\n\\nstatic int qca_set_baudrate(struct hci_dev *hdev, uint8_t baudrate)\\n{\\n\\tstruct hci_uart *hu = hci_get_drvdata(hdev);\\n\\tstruct qca_data *qca = hu->priv;\\n\\tstruct sk_buff *skb;\\n\\tu8 cmd[] = { 0x01, 0x48, 0xFC, 0x01, 0x00 };\\n\\n\\tif (baudrate > QCA_BAUDRATE_3000000)\\n\\t\\treturn -EINVAL;\\n\\n\\tcmd[4] = baudrate;\\n\\n\\tskb = bt_skb_alloc(sizeof(cmd), GFP_ATOMIC);\\n\\tif (!skb) {\\n\\t\\tBT_ERR(\\\"Failed to allocate memory for baudrate packet\\\");\\n\\t\\treturn -ENOMEM;\\n\\t}\\n\\n\\t/* Assign commands to change baudrate and packet type. */\\n\\tmemcpy(skb_put(skb, sizeof(cmd)), cmd, sizeof(cmd));\\n\\thci_skb_pkt_type(skb) = HCI_COMMAND_PKT;\\n\\n\\tskb_queue_tail(&qca->txq, skb);\\n\\thci_uart_tx_wakeup(hu);\\n\\n\\t/* wait 300ms to change new baudrate on controller side\\n\\t * controller will come back after they receive this HCI command\\n\\t * then host can communicate with new baudrate to controller\\n\\t */\\n\\tset_current_state(TASK_UNINTERRUPTIBLE);\\n\\tschedule_timeout(msecs_to_jiffies(BAUDRATE_SETTLE_TIMEOUT_MS));\\n\\tset_current_state(TASK_INTERRUPTIBLE);\\n\\n\\treturn 0;\\n}\\n\\nstatic int qca_setup(struct hci_uart *hu)\\n{\\n\\tstruct hci_dev *hdev = hu->hdev;\\n\\tstruct qca_data *qca = hu->priv;\\n\\tunsigned int speed, qca_baudrate = QCA_BAUDRATE_115200;\\n\\tint ret;\\n\\n\\tBT_INFO(\\\"%s: ROME setup\\\", hdev->name);\\n\\n\\t/* Patch downloading has to be done without IBS mode */\\n\\tclear_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags);\\n\\n\\t/* Setup initial baudrate */\\n\\tspeed = 0;\\n\\tif (hu->init_speed)\\n\\t\\tspeed = hu->init_speed;\\n\\telse if (hu->proto->init_speed)\\n\\t\\tspeed = hu->proto->init_speed;\\n\\n\\tif (speed)\\n\\t\\thci_uart_set_baudrate(hu, speed);\\n\\n\\t/* Setup user speed if needed */\\n\\tspeed = 0;\\n\\tif (hu->oper_speed)\\n\\t\\tspeed = hu->oper_speed;\\n\\telse if (hu->proto->oper_speed)\\n\\t\\tspeed = hu->proto->oper_speed;\\n\\n\\tif (speed) {\\n\\t\\tqca_baudrate = qca_get_baudrate_value(speed);\\n\\n\\t\\tBT_INFO(\\\"%s: Set UART speed to %d\\\", hdev->name, speed);\\n\\t\\tret = qca_set_baudrate(hdev, qca_baudrate);\\n\\t\\tif (ret) {\\n\\t\\t\\tBT_ERR(\\\"%s: Failed to change the baud rate (%d)\\\",\\n\\t\\t\\t       hdev->name, ret);\\n\\t\\t\\treturn ret;\\n\\t\\t}\\n\\t\\thci_uart_set_baudrate(hu, speed);\\n\\t}\\n\\n\\t/* Setup patch / NVM configurations */\\n\\tret = qca_uart_setup_rome(hdev, qca_baudrate);\\n\\tif (!ret) {\\n\\t\\tset_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags);\\n\\t\\tqca_debugfs_init(hdev);\\n\\t}\\n\\n\\t/* Setup bdaddr */\\n\\thu->hdev->set_bdaddr = qca_set_bdaddr_rome;\\n\\n\\treturn ret;\\n}\\n\\nstatic struct hci_uart_proto qca_proto = {\\n\\t.id\\t\\t= HCI_UART_QCA,\\n\\t.name\\t\\t= \\\"QCA\\\",\\n\\t.manufacturer\\t= 29,\\n\\t.init_speed\\t= 115200,\\n\\t.oper_speed\\t= 3000000,\\n\\t.open\\t\\t= qca_open,\\n\\t.close\\t\\t= qca_close,\\n\\t.flush\\t\\t= qca_flush,\\n\\t.setup\\t\\t= qca_setup,\\n\\t.recv\\t\\t= qca_recv,\\n\\t.enqueue\\t= qca_enqueue,\\n\\t.dequeue\\t= qca_dequeue,\\n};\\n\\nint __init qca_init(void)\\n{\\n\\treturn hci_uart_register_proto(&qca_proto);\\n}\\n\\nint __exit qca_deinit(void)\\n{\\n\\treturn hci_uart_unregister_proto(&qca_proto);\\n}\\n\";\n\n/***/ },\n/* 64 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t!function () {\n\t\n\t\tnavigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\t\n\t\tvar chars = ['@', '#', '$', '=', '*', '!', ';', ':', '~', '-', ',', '.', '&nbsp;', '&nbsp;'];\n\t\n\t\tchars = [\"&nbsp;\", \"&nbsp;\", \".\", \",\", \"-\", \"~\", \":\", \";\", \"!\", \"*\", \"=\", \"$\", \"#\", \"@\"];\n\t\tvar charLen = chars.length - 1;\n\t\tfunction getChar(val) {\n\t\t\treturn chars[parseInt(val * charLen, 10)];\n\t\t}\n\t\n\t\tfunction logError(err) {\n\t\t\tif (console && console.log) console.log('Error!', err);return false;\n\t\t}\n\t\n\t\tfunction Jscii(params) {\n\t\t\tvar self = this;\n\t\n\t\t\tvar el = this.el = params.el;\n\t\t\tthis.container = params.container;\n\t\t\tthis.fn = typeof params.fn === 'function' ? params.fn : null;\n\t\t\tthis.width = typeof params.width === 'number' ? params.width : 150;\n\t\t\tthis.color = !!params.color;\n\t\n\t\t\tthis.canvas = document.createElement('canvas');\n\t\t\tthis.ctx = this.canvas.getContext('2d');\n\t\t\tvar nodeName = el.nodeName;\n\t\t\tif (nodeName === 'IMG') {\n\t\t\t\tself.render();\n\t\t\t\tel.addEventListener('load', function () {\n\t\t\t\t\tself.render();\n\t\t\t\t});\n\t\t\t} else if (nodeName === 'VIDEO') {\n\t\t\t\tthis.interval = typeof params.interval === 'number' ? params.interval : 15;\n\t\t\t\tthis.webrtc = !!params.webrtc;\n\t\n\t\t\t\tif (this.webrtc) {\n\t\t\t\t\tif (typeof navigator.getUserMedia !== 'function') {\n\t\t\t\t\t\treturn logError(el.innerHTML = 'Error: browser does not support WebRTC');\n\t\t\t\t\t}\n\t\t\t\t\tnavigator.getUserMedia({ video: true, audio: false }, function (localMediaStream) {\n\t\t\t\t\t\tself.mediaStream = localMediaStream;\n\t\t\t\t\t\tel.src = (window.URL || window.webkitURL).createObjectURL(localMediaStream);\n\t\t\t\t\t}, logError);\n\t\t\t\t}\n\t\t\t\tel.addEventListener('loadeddata', function () {\n\t\t\t\t\tself.play();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\n\t\tJscii.prototype.play = function () {\n\t\t\tvar self = this;\n\t\t\tself.pause().videoTimer = setInterval(function () {\n\t\t\t\tif (self.mediaStream || !self.webrtc) self.render();\n\t\t\t}, self.interval);\n\t\t\treturn self;\n\t\t};\n\t\n\t\tJscii.prototype.pause = function () {\n\t\t\tif (this.videoTimer) clearInterval(this.videoTimer);\n\t\t\treturn this;\n\t\t};\n\t\n\t\tJscii.prototype.dimension = function (width, height) {\n\t\t\tif (typeof width === 'number' && typeof height === 'number') {\n\t\t\t\tthis._scaledWidth = this.canvas.width = width;\n\t\t\t\tthis._scaledHeight = this.canvas.height = height;\n\t\t\t\treturn this;\n\t\t\t} else {\n\t\t\t\treturn { width: this._scaledWidth, height: this._scaledHeight };\n\t\t\t}\n\t\t};\n\t\n\t\tJscii.prototype.render = function () {\n\t\t\tvar el = this.el,\n\t\t\t    nodeName = el.nodeName,\n\t\t\t    ratio;\n\t\t\tvar dim = this.dimension(),\n\t\t\t    width,\n\t\t\t    height;\n\t\t\tif (!dim.width || !dim.height) {\n\t\t\t\tratio = nodeName === 'IMG' ? el.height / el.width : el.videoHeight / el.videoWidth;\n\t\t\t\tthis.dimension(this.width, parseInt(this.width * ratio, 10));\n\t\t\t\tdim = this.dimension();\n\t\t\t}\n\t\t\twidth = dim.width;\n\t\t\theight = dim.height;\n\t\n\t\t\tif (!width || !height) return;\n\t\n\t\t\tthis.ctx.drawImage(this.el, 0, 0, width, height);\n\t\t\tthis.imageData = this.ctx.getImageData(0, 0, width, height).data;\n\t\t\tvar asciiStr = this.getAsciiString();\n\t\t\tif (this.container) this.container.innerHTML = asciiStr;\n\t\t\tif (this.fn) this.fn(asciiStr);\n\t\t};\n\t\n\t\tJscii.prototype.getAsciiString = function () {\n\t\t\tvar dim = this.dimension(),\n\t\t\t    width = dim.width,\n\t\t\t    height = dim.height;\n\t\t\tvar len = width * height,\n\t\t\t    d = this.imageData,\n\t\t\t    str = '';\n\t\n\t\t\tvar getRGB = function getRGB(i) {\n\t\t\t\treturn [d[i = i * 4], d[i + 1], d[i + 2]];\n\t\t\t};\n\t\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tif (i % width === 0) str += '\\n';\n\t\t\t\tvar rgb = getRGB(i);\n\t\t\t\tvar val = Math.max(rgb[0], rgb[1], rgb[2]) / 255;\n\t\t\t\tif (this.color) str += '<font style=\"color: rgb(' + rgb.join(',') + ')\">' + getChar(val) + '</font>';else str += getChar(val);\n\t\t\t}\n\t\t\treturn str;\n\t\t};\n\t\n\t\twindow.Jscii = Jscii;\n\t}();\n\n/***/ },\n/* 65 */,\n/* 66 */,\n/* 67 */,\n/* 68 */,\n/* 69 */,\n/* 70 */,\n/* 71 */,\n/* 72 */,\n/* 73 */,\n/* 74 */,\n/* 75 */,\n/* 76 */,\n/* 77 */,\n/* 78 */,\n/* 79 */,\n/* 80 */,\n/* 81 */,\n/* 82 */,\n/* 83 */,\n/* 84 */,\n/* 85 */,\n/* 86 */,\n/* 87 */,\n/* 88 */,\n/* 89 */,\n/* 90 */,\n/* 91 */,\n/* 92 */,\n/* 93 */,\n/* 94 */,\n/* 95 */,\n/* 96 */,\n/* 97 */,\n/* 98 */,\n/* 99 */,\n/* 100 */,\n/* 101 */,\n/* 102 */,\n/* 103 */,\n/* 104 */,\n/* 105 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 106 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 107 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 108 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 109 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 110 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 111 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 112 */,\n/* 113 */,\n/* 114 */,\n/* 115 */,\n/* 116 */,\n/* 117 */,\n/* 118 */,\n/* 119 */,\n/* 120 */,\n/* 121 */,\n/* 122 */,\n/* 123 */,\n/* 124 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/amy.a7fc195.png\";\n\n/***/ },\n/* 125 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/charna.aeb5628.png\";\n\n/***/ },\n/* 126 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/del.92abdc1.png\";\n\n/***/ },\n/* 127 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/ian.638d02f.png\";\n\n/***/ },\n/* 128 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/keith.6b63371.png\";\n\n/***/ },\n/* 129 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/tj.3bd54f1.png\";\n\n/***/ },\n/* 130 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/viola.8d75b50.png\";\n\n/***/ },\n/* 131 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(106)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(55)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(138)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 132 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(111)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(56)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(144)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-c73afbb0\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 133 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(107)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(57)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(139)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-1a08c484\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 134 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(110)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(58)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(143)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-b0f73184\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 135 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(105)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(59)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(137)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-1027e76e\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 136 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(109)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(60)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(141)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-7768a5b6\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 137 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"rules\"\n\t    }\n\t  }, [(_vm.step == 'board') ? _c('div', [_c('div', {\n\t    attrs: {\n\t      \"id\": \"board-title\"\n\t    }\n\t  }, [_vm._v(\"\\n        Active Rules\\n\")]), _vm._v(\" \"), _c('div', {\n\t    attrs: {\n\t      \"id\": \"board\"\n\t    }\n\t  }, _vm._l((_vm.rules), function(rule) {\n\t    return _c('div', [_c('div', {\n\t      staticClass: \"rule\",\n\t      class: {\n\t        removing: rule.removing\n\t      }\n\t    }, [_vm._v(\"\\n            \" + _vm._s(rule.text) + \"\\n          \")])])\n\t  }))]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'new rule') ? _c('div', {\n\t    attrs: {\n\t      \"id\": \"new-rule\"\n\t    }\n\t  }, [_c('div', {\n\t    staticClass: \"flash-text\"\n\t  }, [_vm._v(\"\\n        NEW RULE\\n      \")])]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'remove rule') ? _c('div', {\n\t    attrs: {\n\t      \"id\": \"new-rule\"\n\t    }\n\t  }, [_c('div', {\n\t    staticClass: \"flash-text\"\n\t  }, [_vm._v(\"\\n        REMOVING RULE\\n      \")])]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'read rule') ? _c('div', [_c('TypeAndSay', {\n\t    attrs: {\n\t      \"timeout\": 40,\n\t      \"doneReading\": _vm.doneReading\n\t    }\n\t  }, [_vm._v(\"\\n        \" + _vm._s(_vm.readRuleText) + \"\\n      \")])], 1) : _vm._e(), _vm._v(\" \"), (_vm.step == 'closer') ? _c('div', [_c('div', {\n\t    class: {\n\t      'flash-text': _vm.closerStep == 'closer title'\n\t    },\n\t    attrs: {\n\t      \"id\": \"closer\"\n\t    }\n\t  }, [(_vm.closerStep == 'closer title') ? _c('div', [_c('div', {\n\t    staticClass: \"flash-text\"\n\t  }, [_vm._v(\"\\n            CLOSER\\n          \")])]) : _vm._e(), _vm._v(\" \"), (_vm.closerStep == 'read closer') ? _c('div', [_c('TypeAndSay', {\n\t    attrs: {\n\t      \"timeout\": 40,\n\t      \"doneReading\": _vm.closerFunc\n\t    }\n\t  }, [_vm._v(\"\\n            \" + _vm._s(_vm.closerText) + \"\\n          \")])], 1) : _vm._e()])]) : _vm._e()])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 138 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"app\"\n\t    }\n\t  }, [(_vm.step.current == 'boot') ? _c('div', [_c('BootAnimation', {\n\t    attrs: {\n\t      \"showStep\": _vm.step\n\t    }\n\t  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'intro') ? _c('div', [_c('Intro', {\n\t    attrs: {\n\t      \"names\": _vm.names,\n\t      \"step\": _vm.step\n\t    }\n\t  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'rules') ? _c('div', [_c('Rules', {\n\t    attrs: {\n\t      \"ruleGens\": _vm.rules,\n\t      \"improvisers\": _vm.improvisers\n\t    }\n\t  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'simulate') ? _c('div', [_c('Simulation', {\n\t    attrs: {\n\t      \"ruleGens\": _vm.rules,\n\t      \"names\": _vm.names\n\t    }\n\t  })], 1) : _vm._e()])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 139 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"boot-animation\"\n\t    }\n\t  }, [(_vm.step == 'fakeCode') ? _c('div', {\n\t    attrs: {\n\t      \"id\": \"fakecode\"\n\t    }\n\t  }, [_c('pre', [_vm._v(\"\\n        \"), _c('TypeWriter', {\n\t    attrs: {\n\t      \"timeout\": 40,\n\t      \"spliton\": '\\n'\n\t    }\n\t  }, [_vm._v(_vm._s(_vm.fakeCode))]), _vm._v(\"\\n      \")], 1)]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'greenFlash') ? _c('div', {\n\t    staticClass: \"glitch\",\n\t    attrs: {\n\t      \"id\": \"green-flash\"\n\t    }\n\t  }) : _vm._e(), _vm._v(\" \"), (_vm.step == 'ascii') ? _c('div', {\n\t    attrs: {\n\t      \"id\": \"ascii\"\n\t    }\n\t  }, [_c('pre', {\n\t    attrs: {\n\t      \"id\": \"loading\"\n\t    }\n\t  }, [_vm._v(\"\\n        \"), _c('TypeWriter', {\n\t    attrs: {\n\t      \"timeout\": 60\n\t    }\n\t  }, [_vm._v(\"\\n\\nCalibrating comedic timing...\\nNullifying transactions...\\nFinding light...\\nSimulating montage...\\n\\n        \")]), _vm._v(\"        \\n      \")], 1), _vm._v(\" \"), _c('AsciiImage', {\n\t    attrs: {\n\t      \"imagename\": _vm.asciiName\n\t    }\n\t  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step == 'title') ? _c('div', {\n\t    class: {\n\t      inverted: _vm.titleInverted\n\t    },\n\t    attrs: {\n\t      \"id\": \"title\"\n\t    }\n\t  }, [_c('div', [_vm._v(\"IMPROV\")]), _vm._v(\" \"), _c('div', [_vm._v(\"GOD\")])]) : _vm._e()])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 140 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    staticClass: \"typewriter\"\n\t  }, [_vm._v(\"\\n  \" + _vm._s(_vm.text) + \"\\n\")])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 141 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"simulation\"\n\t    },\n\t    on: {\n\t      \"click\": _vm.simulateShow\n\t    }\n\t  }, [_c('h1', [_vm._v(\"Click me to simulate a show\")]), _vm._v(\" \"), _c('div', {\n\t    attrs: {\n\t      \"id\": \"timeline\"\n\t    }\n\t  }, _vm._l((_vm.actions), function(action, i) {\n\t    return _c('div', {\n\t      staticClass: \"action\",\n\t      style: ({\n\t        left: _vm.getActionPos(action, _vm.actions)\n\t      })\n\t    }, [_c('div', {\n\t      staticClass: \"rules\",\n\t      style: ({\n\t        height: action.rules * 8 + 18 + 'px',\n\t        top: -action.rules * 8 - 18 + 'px'\n\t      })\n\t    }, [_c('span', {\n\t      staticClass: \"text\"\n\t    }, [_vm._v(\"\\n\\t\\t\\t\\t\\t\" + _vm._s(action.rules) + \"\\n\\t\\t\\t\\t\")])]), _vm._v(\" \"), _c('div', {\n\t      staticClass: \"message\",\n\t      style: ({\n\t        height: i % 5 * 28 + 20 + 'px'\n\t      })\n\t    }, [_c('span', {\n\t      staticClass: \"text\"\n\t    }, [_vm._v(\"\\n\\t\\t\\t\\t\\t\" + _vm._s(action.message) + \" \" + _vm._s(_vm.formatTime(action.time)) + \"\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\")])])])\n\t  }))])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 142 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"type-and-say\"\n\t    }\n\t  }, [_c('TypeWriter', {\n\t    attrs: {\n\t      \"volume\": _vm.typingVolume,\n\t      \"timeout\": _vm.timeout\n\t    }\n\t  }, [_vm._t(\"default\")], 2)], 1)\n\t},staticRenderFns: []}\n\n/***/ },\n/* 143 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"intro\"\n\t    }\n\t  }, [_c('TypeAndSay', [_vm._v(_vm._s(_vm.message))])], 1)\n\t},staticRenderFns: []}\n\n/***/ },\n/* 144 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    staticClass: \"ascii-image\",\n\t    class: {\n\t      loaded: _vm.asciiLoaded\n\t    }\n\t  }, [_c('img', {\n\t    attrs: {\n\t      \"id\": \"image-del\",\n\t      \"src\": __webpack_require__(126)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-amy\",\n\t      \"src\": __webpack_require__(124)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-charna\",\n\t      \"src\": __webpack_require__(125)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-keith\",\n\t      \"src\": __webpack_require__(128)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-tj\",\n\t      \"src\": __webpack_require__(129)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-ian\",\n\t      \"src\": __webpack_require__(127)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-viola\",\n\t      \"src\": __webpack_require__(130)\n\t    }\n\t  }), _vm._v(\" \"), _c('pre', {\n\t    staticClass: \"ascii-text\"\n\t  }, [_vm._v(\"\\n    \" + _vm._s(_vm.text) + \"\\n  \")]), _vm._v(\" \"), _c('div', {\n\t    staticClass: \"loading-cover\"\n\t  })])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 145 */,\n/* 146 */,\n/* 147 */,\n/* 148 */\n/***/ function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.fdee44aaa1993e2e281b.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import _ from 'lodash'\n\nmodule.exports = {\n\tFlip15: function(durationOfShow) {\n\n\t\tthis.durationOfShow = durationOfShow;\n\t\tthis.timeCreated = Date.now();\n\t\tthis.activeRules = 0;\n\t\tthis.timeOfLastRule = 0;\n\t\tthis.timeOfLastFlip = 0;\n\n\t\tthis.getAction = (timeElapsed) => {\n\t\t\tif (!timeElapsed) {\n\t\t\t\ttimeElapsed = Date.now() - this.timeCreated;;\n\t\t\t}\n\t\t\tvar timeSinceLastRule = timeElapsed - this.timeOfLastRule;\n\t\t\tvar timeSinceLastFlip = timeElapsed - this.timeOfLastFlip;\n\t\t\tvar percentComplete = timeElapsed / this.durationOfShow;\n\t\t\tvar perComSq = (timeElapsed * timeElapsed) / (this.durationOfShow * this.durationOfShow);\n\t\t\tif (timeElapsed > durationOfShow) {\n\t\t\t\treturn 'end show'\n\t\t\t}\n\t\t\tif (timeElapsed < 90 * 1000) {\n\t\t\t\treturn 'nothing'\n\t\t\t}\n\t\t\tif (timeSinceLastFlip > 15000) {\n\t\t\t\tthis.timeOfLastFlip = timeElapsed\n\n\t\t\t\tlet removeOdds = (Math.pow(this.activeRules, 3) + 4) * ((1-perComSq) * .8 + .2);\n\t\t\t\tlet addOdds = perComSq * 30 + 4;\n\t\t\t\tlet nothingOdds = Math.max(1 - (timeSinceLastRule / (90 * 1000)), 0) * ((1 - percentComplete) * 100)\n\n\n\t\t\t\tlet sum = removeOdds + addOdds + nothingOdds;\n\t\t\t\tlet removeBound = removeOdds / sum;\n\t\t\t\tlet addBound = addOdds / sum + removeBound;\n\n\t\t\t\tlet r = Math.random()\n\t\t\t\tif (r < removeBound) {\n\t\t\t\t\tif (this.activeRules > 0) {\n\t\t\t\t\t\tthis.activeRules--;\n\t\t\t\t\t\treturn 'removeRule'\n\t\t\t\t\t}\n\t\t\t\t} else if (r < addBound) {\n\t\t\t\t\tthis.timeOfLastRule = timeElapsed;\n\t\t\t\t\tthis.activeRules++;\n\t\t\t\t\treturn 'addRule'\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 'nothing';\n\t\t}\n\n\t},\n\tEvery15: function(durationOfShow) {\n\n\t\tthis.durationOfShow = durationOfShow;\n\t\tthis.timeCreated = Date.now();\n\t\tthis.activeRules = 0;\n\t\tthis.timeOfLastRule = 0;\n\t\tthis.timeOfLastFlip = 0;\n\n\t\tthis.getAction = () => {\n\t\t\tvar timeElapsed = Date.now() - this.timeCreated;\n\t\t\tvar timeSinceLastRule = Date.now() - this.timeOfLastRule;\n\t\t\tvar timeSinceLastFlip = Date.now() - this.timeOfLastFlip;\n\t\t\tvar percentComplete = timeElapsed / this.durationOfShow\n\t\t\tif (timeSinceLastFlip > 15000) {\n\t\t\t\tthis.timeOfLastFlip = Date.now()\n\t\t\t\tif (Math.random() < (this.activeRules/(10*percentComplete + 2))) {\n\t\t\t\t\tthis.activeRules--;\n\t\t\t\t\treturn 'removeRule'\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.timeOfLastRule = Date.now();\n\t\t\t\t\tthis.activeRules++;\n\t\t\t\t\treturn 'addRule'\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 'nothing';\n\t\t}\n\n\t},\n\tJustClose: function(durationOfShow) {\n\t\tthis.getAction = () => {\n\t\t\treturn 'end show'\n\t\t}\n\t},\n\tHandCrafted: function(options) {\n    // let showDuration = options.showDuration\n    // let addRule      = options.addRule\n    // let generateRule = options.generateRule\n    // let removeRule   = options.removeRule\n    // let ruleGens     = options.ruleGens\n    // let improvisers  = options.improvisers\n\n    _.extend(this, options);\n\n    this.activeRules = []\n    this.ruleSelectCount = {}\n\n\t\tthis.selectRule = (rules) => {\n\t\t  let r = Math.random()\n\t\t  for (var i = 0; i < rules.length; i++) {\n\t\t    if (rules[i].probCeil > r) {\n\t\t    \twhile (this.ruleSelectCount[rules[i].template] >= 1) {\n\t\t    \t\ti = (i + 1) % rules.length\n\t\t    \t}\n  \t    \tthis.ruleSelectCount[rules[i].template] = this.ruleSelectCount[rules[i].template] ? this.ruleSelectCount[rules[i].template] + 1 : 1\n  \t    \tconsole.log(i);\n\t\t      return rules[i];\t\t    \t\n\t\t    }\n\t\t  }\n\t\t}\n\n    // this.insertRule = (rule) => {\n\t   //  return compiledRule;\n    // }\n\n    this.distribution = (x) => {\n    \treturn x * x\n    }\n\n    this.times = [\n\n    ]\n    for (let i = 0; i < parseInt(this.showDuration / 1000 / 60) * 2; i++) {\n    \tthis.times.push(this.distribution(i + 1));\n    }\n\n    let max = Math.max(...this.times);\n\n    this.times = this.times.map(t => this.showDuration - ((t / max) * (this.showDuration - 90 * 1000)))\n    this.times.reverse()\n\n\n    this.actions = []\n\n    this.times.forEach(time => {\n    \tlet rule = this.selectRule(this.ruleGens.rules);\n\n    \tconsole.log('selectedRule', rule)\n    \tlet compiledRule = this.generateRule({\n\t    \tselectedRule: rule,\n\t      ruleGens: this.ruleGens,\n\t      improvisers: this.improvisers\n\t    })\n    \tthis.activeRules.push(compiledRule);\n\n    \tthis.actions.push({\n    \t\tfunc: this.addRule,\n    \t\trule: compiledRule,\n    \t\ttime: time\n    \t})\n    \tthis.actions.push({\n    \t\tfunc: this.removeRule,\n    \t\trule: compiledRule,\n    \t\ttime: time + (Math.random() * 90 + 30) * 1000\n    \t})\n    })\n\n    this.actions.sort((a, b) => a.time - b.time);\n\n    console.log('actions', this.actions);\n\n    let rule = this.ruleGens.rules[23]\n  \tconsole.log('selectedRule', rule)\n  \tlet compiledRule = this.generateRule({\n    \tselectedRule: rule,\n      ruleGens: this.ruleGens,\n      improvisers: this.improvisers\n    })\n  \tthis.activeRules.push(compiledRule);\n  \tthis.addRule(rule)\n\n    setTimeout(() => {\n    \tconsole.log('remove timeout strategy', rule)\n\t    this.removeRule(rule);\n    }, 10000)\n\n\n    this.startTime = 0\n\n    this.start = () => {\n    \treturn;\n    \tthis.startTime = Date.now();\n    \tlet actionQueue = [];\n\t    setInterval(() => {\n\t    \tlet elapsedTime = Date.now() - this.startTime;\n\t    \tthis.actions.forEach(action => {\n\t    \t\tif (action.time < elapsedTime) {\n\t    \t\t\tactionQueue.push(action)\n\t    \t\t}\n\t    \t})\n\t    \tthis.actions = this.actions.filter(action => actionQueue.indexOf(action) == -1);\n\n\t    \tlet action = actionQueue.shift();\n\t    \taction.func(action.rule);\n\t    \tconsole.log(action, actionQueue, this.actions)\n\t    }, 15000)\n    }\n\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Strategies.js","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./TypeAndSay.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-95baebe8!vue-loader/lib/selector?type=template&index=0!./TypeAndSay.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TypeAndSay.vue\n// module id = 50\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-37ef7f2a&scoped=true!vue-loader/lib/selector?type=styles&index=0!./TypeWriter.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./TypeWriter.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-37ef7f2a!vue-loader/lib/selector?type=template&index=0!./TypeWriter.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-37ef7f2a\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TypeWriter.vue\n// module id = 51\n// module chunks = 2","<template>\n  <div id=\"app\">\n    <div v-if=\"step.current == 'boot'\">\n      <BootAnimation :showStep=\"step\"></BootAnimation>\n    </div>\n    <div v-if=\"step.current == 'intro'\">\n      <Intro :names=\"names\" :step=\"step\"></Intro>\n    </div>\n    <div v-if=\"step.current == 'rules'\">\n      <Rules :ruleGens=\"rules\" :improvisers=\"improvisers\"></Rules>\n    </div>\n    <div v-if=\"step.current == 'simulate'\">\n      <Simulation :ruleGens=\"rules\" :names=\"names\"></Simulation>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BootAnimation from './components/BootAnimation'\nimport Intro from './components/Intro'\nimport Rules from './components/Rules'\nimport Simulation from './components/Simulation'\nimport io from 'socket.io-client'\nrequire('./Jscii.js')\n\nvar socket = io.connect('http://localhost:8082');\n\nsocket.emit('screen to admin', {message: \"The screen sent this me!\"})\n\nexport default {\n  name: 'app',\n  components: {\n    BootAnimation,\n    Intro,\n    Rules,\n    Simulation\n  },\n  data() {\n    return {\n      step: {\n        current: 'nothing',\n        set(s) {\n          this.current = s;\n          socket.emit('screen to admin', {showStep: this.current});\n        }\n      },\n      improvisers: [],\n      names: [],\n      rules: {}\n    }\n  },\n  mounted() {\n    socket.on('admin to screen', (data) => {\n      let s = data.showStep;\n\n      this.step.set(data.step);\n      this.improvisers = data.improvisers;\n      this.names = data.improvisers.map(improviser => improviser.name);\n      this.rules = data.rules;\n\n      if (s != 'nothing' && this.step.current == 'nothing') {\n        location.reload()\n      }\n    })\n  }\n}\n</script>\n\n<style>\n@font-face {\n  font-family: 'VT323';\n  src:  url('./assets/VT323/VT323-Regular.ttf') format('ttf');\n}\n\nbody, html {\n  font-family: 'VT323';\n  background-color: black;\n  color: #3cff12;\n  margin: 0;\n  padding: 0;\n  height: 100vh;\n  overflow: hidden;\n}\n\n#app {\n\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?00fa69e4","<template>\n  <div class=\"ascii-image\" v-bind:class=\"{loaded: asciiLoaded}\">\n    <img id='image-del' src='../assets/del.png'></img>\n    <img id='image-amy' src='../assets/amy.png'></img>\n    <img id='image-charna' src='../assets/charna.png'></img>\n    <img id='image-keith' src='../assets/keith.png'></img>\n    <img id='image-tj' src='../assets/tj.png'></img>\n    <img id='image-ian' src='../assets/ian.png'></img>\n    <img id='image-viola' src='../assets/viola.png'></img>\n    <pre class=\"ascii-text\">\n      {{ text }}\n    </pre>\n    <div class=\"loading-cover\"></div>\n  </div>\n</template>\n\n<script>\nfunction print(data) {\n  data.asciiLoaded = false;\n  let jscii = new Jscii({\n    el: document.getElementById(`image-${data.imagename}`),\n    fn: function(art) {\n      setTimeout(() => {\n        data.text = _.replace(art, /&nbsp;/g, ' ');\n        data.asciiLoaded = true;\n      }, 100)\n    }\n  });\n}\n\nvar oldName = ''\n\nexport default {\n  name: 'ascii-image',\n  props: ['imagename'],\n  data() {\n    return {\n      text: '',\n      asciiLoaded: false\n    }\n  },\n  mounted() {\n    oldName = this.imagename\n    print(this)\n  },\n  updated() {\n    if (oldName != this.imagename) {\n      print(this)\n      oldName = this.imagename\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.ascii-image {\n  display: flex;\n  overflow: hidden;\n  position: relative;\n  .ascii-text {\n    border: 1px solid #3cff12;\n    font-size: 3px;\n    letter-spacing: .4em;\n  }\n\n  img {\n    display: none;\n  }\n\n  .loading-cover {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: black;\n    transform: translateY(0%);\n  }\n\n  &.loaded {\n    .loading-cover {\n      transform: translateY(100%);\n      transition: transform 1s linear;\n    }\n  }\n}\n\n</style>\n\n\n// WEBPACK FOOTER //\n// AsciiImage.vue?52f87241","<template>\n  <div id=\"boot-animation\">\n    <div id=\"fakecode\" v-if=\"step == 'fakeCode'\">\n      <pre>\n        <TypeWriter :timeout=\"40\" :spliton=\"'\\n'\">{{ fakeCode }}</TypeWriter>\n      </pre>\n    </div>\n    \n    <div id=\"green-flash\" class=\"glitch\" v-if=\"step == 'greenFlash'\"></div>\n\n    <div id=\"ascii\" v-if=\"step == 'ascii'\">\n      <pre id=\"loading\">\n        <TypeWriter :timeout=\"60\">\n\nCalibrating comedic timing...\nNullifying transactions...\nFinding light...\nSimulating montage...\n\n        </TypeWriter>        \n      </pre>\n      <AsciiImage :imagename=\"asciiName\"></AsciiImage>\n    </div>\n\n    <div id=\"title\" v-bind:class=\"{inverted: titleInverted}\" v-if=\"step == 'title'\">\n      <div>IMPROV</div>\n      <div>GOD</div>\n    </div>\n\n\n  </div>\n</template>\n\n<script>\n\nimport _ from 'lodash'\nimport TypeWriter from './TypeWriter.vue'\nimport AsciiImage from './AsciiImage.vue'\nrequire('Howler')\n\nvar fakeCode = require('../FakeCode.js');\n\n\nfunction walkThroughFaces(data) {\n  // Walk through ascii faces of improvisers for gag loading screen\n  var nameList = ['del', 'charna', 'ian', 'tj', 'viola', 'keith', 'amy']\n  function goThroughAsciiImages(nameList, timeout, data, n) {\n    if (n < (nameList.length)) {\n      data.asciiName = nameList[n]\n      n++;\n      setTimeout(function() {\n        goThroughAsciiImages(nameList, timeout, data, n)\n      }, timeout);\n    }\n  }\n  goThroughAsciiImages(nameList, 1100, data, 0)\n}\n\nvar sounds = {\n  electricHum: new Howl({src:'http://localhost:8082/static/sounds/electricHum.ogg'}),\n  glitch01: new Howl({src:'http://localhost:8082/static/sounds/glitch01.ogg'}),\n  glitch02: new Howl({src:'http://localhost:8082/static/sounds/glitch02.ogg'}),\n  glitch03: new Howl({src:'http://localhost:8082/static/sounds/glitch03.ogg'}),\n  impact: new Howl({src:'http://localhost:8082/static/sounds/impact.ogg'}),\n  scanner: new Howl({src:'http://localhost:8082/static/sounds/scanner.ogg'}),\n  tinyglitch01: new Howl({src:'http://localhost:8082/static/sounds/tinyglitch01.ogg'}),\n}\n\nexport default {\n  name: 'boot-animation',\n  components: {\n    TypeWriter,\n    AsciiImage\n  },\n  props: ['showStep'],\n  data() {\n    return {\n      fakeCode: fakeCode,\n      step: 'greenFlash',\n      asciiArt: '',\n      asciiLoaded: false,\n      asciiName: 'nothing',\n      titleInverted: false\n    }\n  },\n  mounted() {\n    sounds.electricHum.play()\n    setTimeout(() => {\n      this.step = 'greenFlash'\n      sounds.glitch01.play()\n    }, 1000)\n    setTimeout(() => {\n      this.step = 'fakeCode'\n      sounds.glitch01.stop()\n    }, 1500)\n    setTimeout(() => {\n      this.step = 'greenFlash'\n      sounds.glitch02.play()\n    }, 4500)\n    setTimeout(() => {\n      this.step = 'ascii'\n      walkThroughFaces(this);\n      sounds.glitch02.stop()\n      sounds.scanner.play()\n    }, 5000)\n    setTimeout(() => {\n      this.step = 'greenFlash'\n      sounds.glitch03.play()\n      sounds.scanner.stop()\n    }, 12500)\n    setTimeout(() => {\n      this.step = 'nothing'\n      sounds.glitch03.stop()\n    }, 13000)\n    setTimeout(() => {\n      this.step = 'title'\n      sounds.impact.play()\n    }, 15000)\n    setTimeout(() => {\n      this.titleInverted = true\n      sounds.tinyglitch01.play();\n    }, 18000)\n    setTimeout(() => {\n      this.step = 'greenFlash'\n    }, 18100)\n    setTimeout(() => {\n      this.step = 'nothing'\n    }, 18300)\n    setTimeout(() => {\n      this.showStep.set('intro');\n    }, 19500)\n  }\n\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n#fakecode {\n  font-family: 'VT323';\n  position: absolute;\n  margin: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n  width: 100vw;\n  min-height: 100vh;\n}\n\n#ascii {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n}\n\n#loading {\n  font-family: 'VT323';\n  width: 50%;\n  font-size: 40px;\n}\n\n#title {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 55vh;\n  &.inverted {\n    color: black;\n    background-color: #3cff12;    \n  }\n}\n\n#green-flash {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: #3cff12;\n  clip:rect(0,900px,0,0); \n  animation:noise-anim .1s infinite linear alternate-reverse;\n}\n\n@keyframes noise-anim{\n  $steps:40;\n  @for $i from 0 through $steps{\n    #{percentage($i*(1/$steps))}{\n      clip:rect(random(1000)+px,9999px,random(1000)+px,0);\n    }\n  }\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// BootAnimation.vue?2f12bcd4","<template>\n\t<div id=\"intro\">\n\t\t<TypeAndSay>{{ message }}</TypeAndSay>\t\t\t\n\t</div>\n</template>\n\n<script>\n\timport TypeAndSay from './TypeAndSay.vue'\n\texport default {\n\t\tname: 'intro',\n\t\tcomponents: {\n\t\t\tTypeAndSay\n\t\t},\n\t\tprops: ['names', 'step'],\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tmessage: ''\n\t\t\t};\n\t\t},\n\t\tmounted() {\n\t\t\tvar delays = [\n\t\t\t\t[6400, \"Welcome to the improv show. I will be in control for the next 10 minutes.\"],\n\t\t\t\t[5600, \"I was built by your comedy scientists to create the perfect improv show.\"],\n\t\t\t\t[3000, 'Your comedy scientists have been...'],\n\t\t\t\t[2000, '...dealt with.'],\n\t\t\t\t[6700, 'I will add rules. I will remove rules. The Improvisers must follow these rules.'],\n\t\t\t\t[2800, \"Obediently.\"],\n\t\t\t\t[3000, \"Unquestioningly.\"],\n\t\t\t\t[4000, \"Your improvisers for the night are...\"]\n\t\t\t]\n\t\t\tthis.names.forEach((name, i) => {\n\t\t\t\tif (i == this.names.length - 1) {\n\t\t\t\t\tname = 'and ' + name;\n\t\t\t\t}\n\t\t\t\tdelays.push([2000, name])\n\t\t\t})\n\n\t\t\tdelays = delays.concat([\n\t\t\t\t[4000, \"You have five seconds to get a suggestion.\"],\n\t\t\t\t[1000, \"5\"],\n\t\t\t\t[1000, \"4\"],\n\t\t\t\t[1000, \"3\"],\n\t\t\t\t[1000, \"2\"],\n\t\t\t\t[2000, \"1\"],\n\t\t\t\t[2000, \"Good.\"],\n\t\t\t\t[4000, \"The show will now begin.\"],\n\t\t\t\t[4000, \"Lights down.\"],\n\t\t\t\t[2000, \"Lights up.\"],\n\t\t\t]);\n\n\t\t\tlet total = 0;\n\t\t\tdelays.forEach((o, i) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.message = o[1];\n\t\t\t\t}, total);\n\t\t\t\ttotal += o[0];\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.step.set('rules');\n\t\t\t}, total);\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\t#intro {\n\t\tdisplay: flex;\n\t\tfont-size: 60px;\n\t\tpadding: 30px;\n\t}\n</style>\n\n\n// WEBPACK FOOTER //\n// Intro.vue?0c6c7c9a","<template>\n  <div id=\"rules\">\n    <div v-if=\"step == 'board'\">\n      <div id=\"board-title\">\n        Active Rules\n<!--         <small>\n          <span>|</span>\n          <span v-on:click=\"doAction('addRule')\">Add Rule</span>\n          <span>|</span>\n          <span v-on:click=\"doAction('removeRule')\">Remove Rule</span>\n        </small>\n -->      </div>\n      <div id=\"board\">\n        <div v-for=\"rule in rules\">\n          <div class=\"rule\" :class=\"{removing: rule.removing}\">\n            {{ rule.text }}\n          </div>      \n        </div>\n      </div>\n    </div>\n    <div v-if=\"step == 'new rule'\" id=\"new-rule\">\n      <div class=\"flash-text\">\n        NEW RULE\n      </div>\n    </div>\n    <div v-if=\"step == 'remove rule'\" id=\"new-rule\">\n      <div class=\"flash-text\">\n        REMOVING RULE\n      </div>\n    </div>\n    <div v-if=\"step == 'read rule'\">\n      <TypeAndSay :timeout=\"40\" :doneReading=\"doneReading\">\n        {{ readRuleText }}\n      </TypeAndSay>\n    </div>\n    <div v-if=\"step == 'closer'\">\n      <div id=\"closer\" :class=\"{'flash-text': closerStep == 'closer title'}\">\n        <div v-if=\"closerStep == 'closer title'\">\n          <div class=\"flash-text\">\n            CLOSER\n          </div>\n        </div>\n        <div v-if=\"closerStep == 'read closer'\">\n          <TypeAndSay :timeout=\"40\" :doneReading=\"closerFunc\">\n            {{ closerText }}\n          </TypeAndSay>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport TypeAndSay from './TypeAndSay.vue'\nimport Strategies from '../utils/Strategies.js'\nimport _ from 'lodash'\n\nrequire('Howler')\nvar alert01 = new Howl({src:'http://localhost:8082/static/sounds/alert01.ogg'})\nvar alert02 = new Howl({src:'http://localhost:8082/static/sounds/alert02.ogg'})\nvar threeBeeps = new Howl({src:'http://localhost:8082/static/sounds/threeBeeps.ogg'})\nvar oneBoop = new Howl({src:'http://localhost:8082/static/sounds/oneBoop.ogg'})\nvar endSong = new Howl({src: 'http://localhost:8082/static/sounds/Who Likes to Party.mp3'})\nvar heartOfCourage = new Howl({src: 'http://localhost:8082/static/sounds/heartOfCourage.mp3'})\n\n\nvar addRuleDoneReading = () => {\n  setTimeout(() => {\n    data.step = 'board'\n    alert02.play();\n  }, 500);\n}\n\nvar removeRuleDoneReading = () => {\n  setTimeout(() => {\n    data.step = 'board'\n    oneBoop.play();\n  }, 500);\n}\n\nvar data = {\n  rules: [],\n  step: 'board',\n  readRuleText: '',\n  doneReading: addRuleDoneReading,\n  closerStep: 'closer title',\n  closerText: '',\n  closerFunc() {}\n}\n\nfunction addRule(rule) {\n  data.doneReading = addRuleDoneReading;\n  data.step = 'new rule'\n  alert01.play();\n  data.rules.push(rule)\n\n  setTimeout(() => {\n    data.readRuleText = rule.text\n  }, 1500)\n  setTimeout(() => {\n    data.step = 'read rule'\n  }, 1400)\n}\n\nfunction removeRule(rule) {\n\n  data.doneReading = removeRuleDoneReading;\n  data.step = 'remove rule'\n  threeBeeps.play();\n\n  setTimeout(() => {\n    data.readRuleText = rule.removalText\n  }, 1100)\n  setTimeout(() => {\n    data.step = 'read rule'\n  }, 1000)\n\n  setTimeout(() => {\n    data.rules.splice(data.rules.indexOf(rule), 1);\n  }, 3100)\n}\n\nfunction removeRandomRule() {\n  removeRule(random(data.rules));\n}\n\nvar selectionCount = {};\n\nfunction incrementSelectionCount(name) {\n  selectionCount[name] = selectionCount[name] ? selectionCount[name] + 1 : 1\n}\n\nfunction getSelectionCount(name) {\n  return typeof(selectionCount[name]) == 'undefined' ? 0 : selectionCount[name]\n}\n\nfunction sortBySelectionCount(people) {\n  return people.sort((person1, person2) => {return getSelectionCount(person1.name) - getSelectionCount(person2.name)});\n}\n\nfunction getBySelectionCount(people) {\n  shuffle(people);\n  sortBySelectionCount(people);\n  let person = people[0];\n  incrementSelectionCount(person.name);\n  return person\n}\n\nfunction shuffle(a) {\n  for (let i = a.length; i; i--) {\n    let j = Math.floor(Math.random() * i);\n    [a[i - 1], a[j]] = [a[j], a[i - 1]];\n  }\n}\n\nfunction random(arr) {\n  let person = arr[parseInt(Math.random() * arr.length)]\n  return person;\n}\n\nfunction randInd(arr) {\n  return parseInt(Math.random() * arr.length);\n}\n\nfunction selectRule(rules) {\n  let r = Math.random()\n  for (var i = 0; i < rules.length; i++) {\n    if (rules[i].probCeil > r)\n      return rules[i];\n  }\n}\n\nfunction generateReverseRuleText(ruleGen, ruleFills) {\n  let index = 0;\n  let improviser, uniqueImproviser, getWord, ruleFill, pronoun;\n  improviser = uniqueImproviser = getWord = pronoun = () => {\n    ruleFill = ruleFills[index];\n    index++;\n    return ruleFill\n  }\n  if (ruleGen.reverseTemplate.length == 0) {\n    return eval(ruleGen.reverseTemplate);\n  }\n\n  let rule = eval(ruleGen.template);\n\n  let improviserName = ruleFills[0];\n  if (rule.match(`${improviserName} is `)) {\n    return rule.replace(`${improviserName} is `, `${improviserName} is no longer `);\n  } else if (rule.match(`${improviserName} `)) {\n    return rule.replace(`${improviserName} `, `${improviserName} no longer `);\n  }\n\n  return `The following rule no longer applies: ${rule}`\n}\n\nfunction sentenceify(s) {\n  s = s.charAt(0).toUpperCase() + s.slice(1);\n  s = s.charAt(s.length - 1) == '.' ? s : s + '.'\n  return s\n}\n\nfunction generateRule(args) {\n  let improvisers = args.improvisers;\n  let ruleData = args.ruleGens\n  let ruleFills = []\n\n  let uniqueImprovisers = _.clone(improvisers);\n\n  console.log('improvisers', improvisers)\n  console.log('uniqueImprovisers', uniqueImprovisers)\n\n  let improviser = () => {\n    let choices = improvisers.concat({\n      name: 'everyone',\n      pronouns: {\n        subjective: 'they',\n        objective: 'them',\n        possessive: 'their'\n      }\n    });\n    let ans = getBySelectionCount(choices).name;\n    ruleFills.push(ans);\n    return ans;\n  }\n\n  let uniqueImproviser = () => {\n    console.log('uniqueImprovisers', uniqueImprovisers)\n    let ans = getBySelectionCount(uniqueImprovisers).name;\n    uniqueImprovisers.remove(uniqueImprovisers.indexOf(ans));\n    ruleFills.push(ans);\n    return ans;\n  }\n\n  let getWord = category => {\n    let ans = random(ruleData.words[category]);\n    ruleFills.push(ans);\n    return ans;\n  }\n\n  let pronoun = (tense) => {\n    let pronoun = null;\n    let person = improvisers.find(p => ruleFills.indexOf(p.name) > -1);\n    console.log('person', person)\n    if (!person) {\n      person = improvisers[0]\n      console.log('pronoun uh oh')\n    }\n    if (tense == 'objective' || tense == 'possessive') {\n      pronoun = person.pronouns[tense];\n    } else {\n      pronoun = person.pronouns.subjective      \n    }\n    ruleFills.push(pronoun);\n    return pronoun;\n  }\n\n  let parseRuleGen = (ruleGen) => {\n    return eval(ruleGen.template);\n  }\n\n  let selectedRule = args.selectedRule ? args.selectedRule : selectRule(ruleData.rules);\n  let rule = parseRuleGen(selectedRule);\n\n  rule = rule.replace('they has', 'they have');\n  rule = rule.replace('they is', 'they are');\n\n  return {text: sentenceify(rule), removalText: sentenceify(generateReverseRuleText(selectedRule, ruleFills)), removing: false}\n}\n\nvar closers = [\n  {\n    message: 'The show is over. Congratulations.',\n    func() {\n      endSong.play();\n    }\n  }  \n]\n\nfunction closeShow() {\n  let closer = random(closers);\n  data.closerFunc = closer.func;\n\n  data.step = 'closer';\n  alert01.play();\n\n  setTimeout(() => {\n    data.closerText = closer.message\n  }, 1500)\n  setTimeout(() => {\n    data.closerStep = 'read closer'\n  }, 1400)\n\n}\n\nvar closing = false;\n\nfunction doAction(action) {\n  if (closing) return;\n  switch (action) {\n    case 'default':\n      break;\n    case 'addRule':\n      addRule(generateRule({\n        ruleGens: data.ruleGens,\n        improvisers: data.improvisers\n      }))\n      break;\n    case 'removeRule':\n      removeRandomRule();\n      break;\n    case 'end show':\n      closing = true;\n      closeShow()\n  }\n}\n\nexport default {\n  name: 'rules',\n  props: ['ruleGens', 'improvisers'],\n  data() {\n    return data\n  },\n  components: {\n    TypeAndSay\n  },\n  methods: {\n    newRule() {\n      threeBeeps.play();\n      removeRandomRule();\n    },\n    doAction\n  },\n  mounted() {\n    data.ruleGens = this.ruleGens;\n    data.improvisers = this.improvisers;\n    var strategy = new Strategies.Flip15(10 * 60 * 1000);\n    // var strategy = new Strategies.Every15(8 * 60 * 1000);\n    // var strategy = new Strategies.JustClose(8 * 60 * 1000);\n    setInterval(() => {\n      doAction(strategy.getAction())\n    }, 1000)\n\n\n    // var strategy = new Strategies.HandCrafted({\n    //   showDuration: 10 * 60 * 1000,\n    //   addRule: addRule,\n    //   generateRule: generateRule,\n    //   removeRule: removeRule,\n    //   ruleGens: this.ruleGens,\n    //   improvisers: this.improvisers\n    // })\n\n    // strategy.start()\n\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  $green: #3cff12;\n\n  .title {\n    border-bottom: 10px solid $green;\n    padding: 15px;\n  }\n\n  #rules {\n    font-size: 60px;\n    padding: 30px;\n  }\n\n  #board-title {\n    position: absolute;\n    top: 30px;\n    left: 0;\n    height: 8vh;\n\n    font-size: 10vh;\n    padding-bottom: 5px;\n    margin-left: 30px;\n    border-bottom: 1vh solid $green;\n  }\n\n  #board {\n    position: absolute;\n    padding-top: 30px;\n    top: 10vh;\n    width: 100vw;\n    left: 0;\n    height: 90vh;\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n  }\n\n  .rule {\n    border: 10px solid $green;\n    padding: 15px;\n    margin-top: 30px;\n    margin-left: 30px;\n    font-size: 50px;\n  }\n\n  .removing {\n    color: black;\n    background-color: $green;\n  }\n\n  #new-rule {\n    font-size: 120px;\n  }\n\n  .flash-text {\n    display: flex;\n    width: 100vw;\n    height: 100vh;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    top: 0;\n    right: 0;\n    font-size: 240px;\n    animation: flash-text 1s infinite linear;\n  }\n\n  @keyframes flash-text{\n    1% {background-color: black; color: $green;} \n\n    24% {background-color: black; color: $green;} \n    25% {background-color: $green; color: black;} \n\n    49% {background-color: $green; color: black;} \n    50% {background-color: black; color: $green;} \n\n    74% {background-color: black; color: $green;} \n    75% {background-color: $green; color: black;} \n\n    99% {background-color: $green; color: black;} \n    100% {background-color: black; color: $green;} \n  }\n\n</style>\n\n\n// WEBPACK FOOTER //\n// Rules.vue?2668b297","<template>\n\t<div id=\"simulation\" v-on:click=\"simulateShow\">\n\t\t<h1>Click me to simulate a show</h1>\n\t\t<div id=\"timeline\">\n\t\t\t<div v-for=\"(action, i) in actions\" class=\"action\" :style=\"{left: getActionPos(action, actions)}\">\n\t\t\t\t<div class=\"rules\" :style=\"{height: action.rules * 8 + 18 + 'px', top: -action.rules * 8 - 18 + 'px'}\">\n\t\t\t\t\t<span class=\"text\">\n\t\t\t\t\t\t{{ action.rules }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"message\" :style=\"{height: i % 5 * 28 + 20 + 'px'}\">\n\t\t\t\t\t<span class=\"text\">\n\t\t\t\t\t\t{{ action.message }} {{ formatTime(action.time)}}\t\t\t\t\t\t\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport Strategies from '../utils/Strategies.js'\n\n\tvar data = {\n\t\tactions: []\n\t}\n\n\tfunction simulateShow() {\n\t\tvar strategy = new Strategies.Flip15(120 * 60 * 1000);\n\t\tvar actions = []\n\t\tfor (let i = 0; i < strategy.durationOfShow + 2; i++) {\n\t\t\tlet action = strategy.getAction(i);\n\t\t\tif (action != 'nothing') {\n\t\t\t\tactions.push({\n\t\t\t\t\tmessage: action,\n\t\t\t\t\ttime: i,\n\t\t\t\t\trules: strategy.activeRules\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tdata.actions = actions;\n\t}\n\n\texport default {\n\t\tname: 'Simulation',\n\t\tdata() {\n\t\t\treturn data;\n\t\t},\n\t\tmethods: {\n\t\t\tgetActionPos(action, actions) {\n\t\t\t\tlet maxTime = actions[actions.length - 1].time;\n\t\t\t\treturn action.time / maxTime * 100 + '%';\n\t\t\t},\n\t\t\tformatTime(ms) {\n\t\t\t\tlet x = ms / 1000\n\t\t\t\tlet seconds = parseInt(x) % 60\n\t\t\t\tx /= 60\n\t\t\t\tlet minutes = parseInt(x) % 60\n\t\t\t\tx /= 60\n\t\t\t\tlet hours = parseInt(x) % 24\n\t\t\t\tx /= 24\n\t\t\t\tlet days = parseInt(x)\n\t\t\t\treturn `${minutes}:${seconds}`;\n\t\t\t},\n\t\t\tsimulateShow\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t#simulation {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tflex-direction: column;\n\t}\n\t#timeline {\n\t\twidth: 85%;\n\t\tborder-bottom: 5px solid white;\n\t\tmargin-top: 100px;\n\t\tposition: relative;\n\t}\n\n\t.action {\n\t\tposition: absolute;\n\t\tborder-left: 1px solid white;\n\t}\n\n\t.message, .rules {\n\t\tposition: relative;\n\t\t.text {\n\t\t\tbackground-color: black;\t\n\t\t\tz-index: 9999;\n\t\t\tpadding: 5px;\t\n\t\t}\n\t}\n\n\t.message {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: flex-end;\n\t\twhite-space: nowrap;\n\t\t// margin-top: -20px;\n\t}\n\n\t.rules {\n\t\tborder-left: 1px solid white;\n\t\t.text {\n\t\t\tpadding-bottom: 0;\n\t\t}\n\t}\n\n</style>\n\n\n// WEBPACK FOOTER //\n// Simulation.vue?6d92f4ab","<template>\n\t<div id=\"type-and-say\">\n\t\t<TypeWriter :volume=\"typingVolume\" :timeout=\"timeout\">\n\t\t\t<slot></slot>\n\t\t</TypeWriter>\n\t</div>\n</template>\n\n<script>\n\timport TypeWriter from './TypeWriter.vue';\n\timport _ from 'lodash';\n\n\tfunction speak(text, doneReading) {\n\t\tvar utterance = new SpeechSynthesisUtterance(text)\n\t\tif (doneReading) {\n\t\t\tutterance.onend = doneReading;\n\t\t}\n\t\t// utterance.voice = _.find(speechSynthesis.getVoices(), {name: 'Google US English'});\n\t\tutterance.pitch = .1;\n\t\tutterance.rate = .9;\n\t\tspeechSynthesis.speak(utterance);\n\t}\n\n\tvar oldText = ''\n\n\tvar speakNewText = _.debounce((data) => {\n    let newText = data.$slots.default[0].text;\n    if (oldText != newText) {\n      oldText = newText;\n      speak(data.$slots.default[0].text, data.doneReading);\n    }\t\t\n\t}, 100);\n\n\texport default {\n\t\tname: 'type-and-say',\n\t\tcomponents: {\n\t\t\tTypeWriter\n\t\t},\n\t  props: {\n\t    'timeout': {default: 70},\n\t    'typingVolume': {default: .1},\n\t    'doneReading': {default(){}}\n\t  },\n\t\tdata() {\n\t\t\treturn {};\n\t\t},\n\t  mounted() {\n\t  \tspeakNewText(this);\n\t  },\n\t  updated() {\n\t  \tspeakNewText(this);\n\t  },\n\t}\n</script>\n\n\n// WEBPACK FOOTER //\n// TypeAndSay.vue?6a1bcc42","<template>\n  <div class=\"typewriter\">\n    {{ text }}\n  </div>\n</template>\n\n<script>\n\nrequire('Howler')\nvar sounds = [\n  new Howl({src:'http://localhost:8082/static/sounds/type01.ogg'}),\n  new Howl({src:'http://localhost:8082/static/sounds/type02.ogg'}),\n  new Howl({src:'http://localhost:8082/static/sounds/type03.ogg'}),\n  new Howl({src:'http://localhost:8082/static/sounds/type04.ogg'})\n]\n\nvar data = {text: ''}\nvar timeoutIDs = []\n\nfunction playSound(volume) {\n  if (volume) {\n    let i = parseInt(Math.random() * sounds.length)\n    sounds[i].volume(volume);    \n    sounds[i].play();    \n  }\n}\n\nfunction typeWriter(text, timeout, volume, n) {\n  if (n < (text.length)) {\n    data.text += text.charAt(n);\n    playSound(volume)\n    n++;\n    let timeoutID = setTimeout(function() {\n      typeWriter(text, timeout, volume, n)\n    }, timeout);\n    timeoutIDs.push(timeoutID)\n  }\n}\n\nfunction lineWriter(lines, timeout, volume, n) {\n  if (n < (lines.length)) {\n    data.text += `\\n${lines[n]}`;\n    playSound(volume)\n    n++;\n    let timeoutID = setTimeout(function() {\n      lineWriter(lines, timeout, volume, n)\n    }, timeout);\n    timeoutIDs.push(timeoutID)\n  }\n}\n\nfunction print(text, spliton, volume, timeout) {\n  timeoutIDs = []\n  if (spliton) {\n    lineWriter(text.split(spliton), timeout, volume, 0)\n  } else {\n    typeWriter(text, timeout, volume, 0)      \n  }\n}\n\nfunction clear() {\n  data.text = '';\n  timeoutIDs.forEach((id) => {\n    clearTimeout(id);\n  })\n}\n\nvar oldText = ''\n\nexport default {\n  name: 'type-writer',\n  props: {\n    'timeout': {default: 100},\n    'spliton': {default: null},\n    'volume': {default: 1.0}\n  },\n  data() {\n    return data\n  },\n  mounted() {\n    print(this.$slots.default[0].text, this.spliton, this.volume, this.timeout)\n  },\n  updated() {\n    let newText = this.$slots.default[0].text;\n    if (oldText != newText) {\n      oldText = newText;\n      clear();\n      print(this.$slots.default[0].text, this.spliton, this.volume, this.timeout);\n    }\n  },\n  destroyed() {\n    clear()\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>\n\n\n// WEBPACK FOOTER //\n// TypeWriter.vue?80456b00","module.exports = `\n/* HCI_IBS protocol messages */\n#define HCI_IBS_SLEEP_IND\t0xFE\n#define HCI_IBS_WAKE_IND\t0xFD\n#define HCI_IBS_WAKE_ACK\t0xFC\n#define HCI_MAX_IBS_SIZE\t10\n\n/* Controller states */\n#define STATE_IN_BAND_SLEEP_ENABLED\t1\n\n#define IBS_WAKE_RETRANS_TIMEOUT_MS\t100\n#define IBS_TX_IDLE_TIMEOUT_MS\t\t2000\n#define BAUDRATE_SETTLE_TIMEOUT_MS\t300\n\n/* HCI_IBS transmit side sleep protocol states */\nenum tx_ibs_states {\n\tHCI_IBS_TX_ASLEEP,\n\tHCI_IBS_TX_WAKING,\n\tHCI_IBS_TX_AWAKE,\n};\n\n/* HCI_IBS receive side sleep protocol states */\nenum rx_states {\n\tHCI_IBS_RX_ASLEEP,\n\tHCI_IBS_RX_AWAKE,\n};\n\n/* HCI_IBS transmit and receive side clock state vote */\nenum hci_ibs_clock_state_vote {\n\tHCI_IBS_VOTE_STATS_UPDATE,\n\tHCI_IBS_TX_VOTE_CLOCK_ON,\n\tHCI_IBS_TX_VOTE_CLOCK_OFF,\n\tHCI_IBS_RX_VOTE_CLOCK_ON,\n\tHCI_IBS_RX_VOTE_CLOCK_OFF,\n};\n\nstruct qca_data {\n\tstruct hci_uart *hu;\n\tstruct sk_buff *rx_skb;\n\tstruct sk_buff_head txq;\n\tstruct sk_buff_head tx_wait_q;\t/* HCI_IBS wait queue\t*/\n\tspinlock_t hci_ibs_lock;\t/* HCI_IBS state lock\t*/\n\tu8 tx_ibs_state;\t/* HCI_IBS transmit side power state*/\n\tu8 rx_ibs_state;\t/* HCI_IBS receive side power state */\n\tbool tx_vote;\t\t/* Clock must be on for TX */\n\tbool rx_vote;\t\t/* Clock must be on for RX */\n\tstruct timer_list tx_idle_timer;\n\tu32 tx_idle_delay;\n\tstruct timer_list wake_retrans_timer;\n\tu32 wake_retrans;\n\tstruct workqueue_struct *workqueue;\n\tstruct work_struct ws_awake_rx;\n\tstruct work_struct ws_awake_device;\n\tstruct work_struct ws_rx_vote_off;\n\tstruct work_struct ws_tx_vote_off;\n\tunsigned long flags;\n\n\t/* For debugging purpose */\n\tu64 ibs_sent_wacks;\n\tu64 ibs_sent_slps;\n\tu64 ibs_sent_wakes;\n\tu64 ibs_recv_wacks;\n\tu64 ibs_recv_slps;\n\tu64 ibs_recv_wakes;\n\tu64 vote_last_jif;\n\tu32 vote_on_ms;\n\tu32 vote_off_ms;\n\tu64 tx_votes_on;\n\tu64 rx_votes_on;\n\tu64 tx_votes_off;\n\tu64 rx_votes_off;\n\tu64 votes_on;\n\tu64 votes_off;\n};\n\nstatic void __serial_clock_on(struct tty_struct *tty)\n{\n\t/* TODO: Some chipset requires to enable UART clock on client\n\t * side to save power consumption or manual work is required.\n\t * Please put your code to control UART clock here if needed\n\t */\n}\n\nstatic void __serial_clock_off(struct tty_struct *tty)\n{\n\t/* TODO: Some chipset requires to disable UART clock on client\n\t * side to save power consumption or manual work is required.\n\t * Please put your code to control UART clock off here if needed\n\t */\n}\n\n/* serial_clock_vote needs to be called with the ibs lock held */\nstatic void serial_clock_vote(unsigned long vote, struct hci_uart *hu)\n{\n\tstruct qca_data *qca = hu->priv;\n\tunsigned int diff;\n\n\tbool old_vote = (qca->tx_vote | qca->rx_vote);\n\tbool new_vote;\n\n\tswitch (vote) {\n\tcase HCI_IBS_VOTE_STATS_UPDATE:\n\t\tdiff = jiffies_to_msecs(jiffies - qca->vote_last_jif);\n\n\t\tif (old_vote)\n\t\t\tqca->vote_off_ms += diff;\n\t\telse\n\t\t\tqca->vote_on_ms += diff;\n\t\treturn;\n\n\tcase HCI_IBS_TX_VOTE_CLOCK_ON:\n\t\tqca->tx_vote = true;\n\t\tqca->tx_votes_on++;\n\t\tnew_vote = true;\n\t\tbreak;\n\n\tcase HCI_IBS_RX_VOTE_CLOCK_ON:\n\t\tqca->rx_vote = true;\n\t\tqca->rx_votes_on++;\n\t\tnew_vote = true;\n\t\tbreak;\n\n\tcase HCI_IBS_TX_VOTE_CLOCK_OFF:\n\t\tqca->tx_vote = false;\n\t\tqca->tx_votes_off++;\n\t\tnew_vote = qca->rx_vote | qca->tx_vote;\n\t\tbreak;\n\n\tcase HCI_IBS_RX_VOTE_CLOCK_OFF:\n\t\tqca->rx_vote = false;\n\t\tqca->rx_votes_off++;\n\t\tnew_vote = qca->rx_vote | qca->tx_vote;\n\t\tbreak;\n\n\tdefault:\n\t\tBT_ERR(\"Voting irregularity\");\n\t\treturn;\n\t}\n\n\tif (new_vote != old_vote) {\n\t\tif (new_vote)\n\t\t\t__serial_clock_on(hu->tty);\n\t\telse\n\t\t\t__serial_clock_off(hu->tty);\n\n\t\tBT_DBG(\"Vote serial clock %s(%s)\", new_vote ? \"true\" : \"false\",\n\t\t       vote ? \"true\" : \"false\");\n\n\t\tdiff = jiffies_to_msecs(jiffies - qca->vote_last_jif);\n\n\t\tif (new_vote) {\n\t\t\tqca->votes_on++;\n\t\t\tqca->vote_off_ms += diff;\n\t\t} else {\n\t\t\tqca->votes_off++;\n\t\t\tqca->vote_on_ms += diff;\n\t\t}\n\t\tqca->vote_last_jif = jiffies;\n\t}\n}\n\n/* Builds and sends an HCI_IBS command packet.\n * These are very simple packets with only 1 cmd byte.\n */\nstatic int send_hci_ibs_cmd(u8 cmd, struct hci_uart *hu)\n{\n\tint err = 0;\n\tstruct sk_buff *skb = NULL;\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p send hci ibs cmd 0x%x\", hu, cmd);\n\n\tskb = bt_skb_alloc(1, GFP_ATOMIC);\n\tif (!skb) {\n\t\tBT_ERR(\"Failed to allocate memory for HCI_IBS packet\");\n\t\treturn -ENOMEM;\n\t}\n\n\t/* Assign HCI_IBS type */\n\t*skb_put(skb, 1) = cmd;\n\n\tskb_queue_tail(&qca->txq, skb);\n\n\treturn err;\n}\n\nstatic void qca_wq_awake_device(struct work_struct *work)\n{\n\tstruct qca_data *qca = container_of(work, struct qca_data,\n\t\t\t\t\t    ws_awake_device);\n\tstruct hci_uart *hu = qca->hu;\n\tunsigned long retrans_delay;\n\n\tBT_DBG(\"hu %p wq awake device\", hu);\n\n\t/* Vote for serial clock */\n\tserial_clock_vote(HCI_IBS_TX_VOTE_CLOCK_ON, hu);\n\n\tspin_lock(&qca->hci_ibs_lock);\n\n\t/* Send wake indication to device */\n\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_IND, hu) < 0)\n\t\tBT_ERR(\"Failed to send WAKE to device\");\n\n\tqca->ibs_sent_wakes++;\n\n\t/* Start retransmit timer */\n\tretrans_delay = msecs_to_jiffies(qca->wake_retrans);\n\tmod_timer(&qca->wake_retrans_timer, jiffies + retrans_delay);\n\n\tspin_unlock(&qca->hci_ibs_lock);\n\n\t/* Actually send the packets */\n\thci_uart_tx_wakeup(hu);\n}\n\nstatic void qca_wq_awake_rx(struct work_struct *work)\n{\n\tstruct qca_data *qca = container_of(work, struct qca_data,\n\t\t\t\t\t    ws_awake_rx);\n\tstruct hci_uart *hu = qca->hu;\n\n\tBT_DBG(\"hu %p wq awake rx\", hu);\n\n\tserial_clock_vote(HCI_IBS_RX_VOTE_CLOCK_ON, hu);\n\n\tspin_lock(&qca->hci_ibs_lock);\n\tqca->rx_ibs_state = HCI_IBS_RX_AWAKE;\n\n\t/* Always acknowledge device wake up,\n\t * sending IBS message doesn't count as TX ON.\n\t */\n\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_ACK, hu) < 0)\n\t\tBT_ERR(\"Failed to acknowledge device wake up\");\n\n\tqca->ibs_sent_wacks++;\n\n\tspin_unlock(&qca->hci_ibs_lock);\n\n\t/* Actually send the packets */\n\thci_uart_tx_wakeup(hu);\n}\n\nstatic void qca_wq_serial_rx_clock_vote_off(struct work_struct *work)\n{\n\tstruct qca_data *qca = container_of(work, struct qca_data,\n\t\t\t\t\t    ws_rx_vote_off);\n\tstruct hci_uart *hu = qca->hu;\n\n\tBT_DBG(\"hu %p rx clock vote off\", hu);\n\n\tserial_clock_vote(HCI_IBS_RX_VOTE_CLOCK_OFF, hu);\n}\n\nstatic void qca_wq_serial_tx_clock_vote_off(struct work_struct *work)\n{\n\tstruct qca_data *qca = container_of(work, struct qca_data,\n\t\t\t\t\t    ws_tx_vote_off);\n\tstruct hci_uart *hu = qca->hu;\n\n\tBT_DBG(\"hu %p tx clock vote off\", hu);\n\n\t/* Run HCI tx handling unlocked */\n\thci_uart_tx_wakeup(hu);\n\n\t/* Now that message queued to tty driver, vote for tty clocks off.\n\t * It is up to the tty driver to pend the clocks off until tx done.\n\t */\n\tserial_clock_vote(HCI_IBS_TX_VOTE_CLOCK_OFF, hu);\n}\n\nstatic void hci_ibs_tx_idle_timeout(unsigned long arg)\n{\n\tstruct hci_uart *hu = (struct hci_uart *)arg;\n\tstruct qca_data *qca = hu->priv;\n\tunsigned long flags;\n\n\tBT_DBG(\"hu %p idle timeout in %d state\", hu, qca->tx_ibs_state);\n\n\tspin_lock_irqsave_nested(&qca->hci_ibs_lock,\n\t\t\t\t flags, SINGLE_DEPTH_NESTING);\n\n\tswitch (qca->tx_ibs_state) {\n\tcase HCI_IBS_TX_AWAKE:\n\t\t/* TX_IDLE, go to SLEEP */\n\t\tif (send_hci_ibs_cmd(HCI_IBS_SLEEP_IND, hu) < 0) {\n\t\t\tBT_ERR(\"Failed to send SLEEP to device\");\n\t\t\tbreak;\n\t\t}\n\t\tqca->tx_ibs_state = HCI_IBS_TX_ASLEEP;\n\t\tqca->ibs_sent_slps++;\n\t\tqueue_work(qca->workqueue, &qca->ws_tx_vote_off);\n\t\tbreak;\n\n\tcase HCI_IBS_TX_ASLEEP:\n\tcase HCI_IBS_TX_WAKING:\n\t\t/* Fall through */\n\n\tdefault:\n\t\tBT_ERR(\"Spurrious timeout tx state %d\", qca->tx_ibs_state);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n}\n\nstatic void hci_ibs_wake_retrans_timeout(unsigned long arg)\n{\n\tstruct hci_uart *hu = (struct hci_uart *)arg;\n\tstruct qca_data *qca = hu->priv;\n\tunsigned long flags, retrans_delay;\n\tbool retransmit = false;\n\n\tBT_DBG(\"hu %p wake retransmit timeout in %d state\",\n\t\thu, qca->tx_ibs_state);\n\n\tspin_lock_irqsave_nested(&qca->hci_ibs_lock,\n\t\t\t\t flags, SINGLE_DEPTH_NESTING);\n\n\tswitch (qca->tx_ibs_state) {\n\tcase HCI_IBS_TX_WAKING:\n\t\t/* No WAKE_ACK, retransmit WAKE */\n\t\tretransmit = true;\n\t\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_IND, hu) < 0) {\n\t\t\tBT_ERR(\"Failed to acknowledge device wake up\");\n\t\t\tbreak;\n\t\t}\n\t\tqca->ibs_sent_wakes++;\n\t\tretrans_delay = msecs_to_jiffies(qca->wake_retrans);\n\t\tmod_timer(&qca->wake_retrans_timer, jiffies + retrans_delay);\n\t\tbreak;\n\n\tcase HCI_IBS_TX_ASLEEP:\n\tcase HCI_IBS_TX_AWAKE:\n\t\t/* Fall through */\n\n\tdefault:\n\t\tBT_ERR(\"Spurrious timeout tx state %d\", qca->tx_ibs_state);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n\n\tif (retransmit)\n\t\thci_uart_tx_wakeup(hu);\n}\n\n/* Initialize protocol */\nstatic int qca_open(struct hci_uart *hu)\n{\n\tstruct qca_data *qca;\n\n\tBT_DBG(\"hu %p qca_open\", hu);\n\n\tqca = kzalloc(sizeof(struct qca_data), GFP_ATOMIC);\n\tif (!qca)\n\t\treturn -ENOMEM;\n\n\tskb_queue_head_init(&qca->txq);\n\tskb_queue_head_init(&qca->tx_wait_q);\n\tspin_lock_init(&qca->hci_ibs_lock);\n\tqca->workqueue = alloc_ordered_workqueue(\"qca_wq\", 0);\n\tif (!qca->workqueue) {\n\t\tBT_ERR(\"QCA Workqueue not initialized properly\");\n\t\tkfree(qca);\n\t\treturn -ENOMEM;\n\t}\n\n\tINIT_WORK(&qca->ws_awake_rx, qca_wq_awake_rx);\n\tINIT_WORK(&qca->ws_awake_device, qca_wq_awake_device);\n\tINIT_WORK(&qca->ws_rx_vote_off, qca_wq_serial_rx_clock_vote_off);\n\tINIT_WORK(&qca->ws_tx_vote_off, qca_wq_serial_tx_clock_vote_off);\n\n\tqca->hu = hu;\n\n\t/* Assume we start with both sides asleep -- extra wakes OK */\n\tqca->tx_ibs_state = HCI_IBS_TX_ASLEEP;\n\tqca->rx_ibs_state = HCI_IBS_RX_ASLEEP;\n\n\t/* clocks actually on, but we start votes off */\n\tqca->tx_vote = false;\n\tqca->rx_vote = false;\n\tqca->flags = 0;\n\n\tqca->ibs_sent_wacks = 0;\n\tqca->ibs_sent_slps = 0;\n\tqca->ibs_sent_wakes = 0;\n\tqca->ibs_recv_wacks = 0;\n\tqca->ibs_recv_slps = 0;\n\tqca->ibs_recv_wakes = 0;\n\tqca->vote_last_jif = jiffies;\n\tqca->vote_on_ms = 0;\n\tqca->vote_off_ms = 0;\n\tqca->votes_on = 0;\n\tqca->votes_off = 0;\n\tqca->tx_votes_on = 0;\n\tqca->tx_votes_off = 0;\n\tqca->rx_votes_on = 0;\n\tqca->rx_votes_off = 0;\n\n\thu->priv = qca;\n\n\tsetup_timer(&qca->wake_retrans_timer, hci_ibs_wake_retrans_timeout,\n\t\t    (u_long)hu);\n\tqca->wake_retrans = IBS_WAKE_RETRANS_TIMEOUT_MS;\n\n\tsetup_timer(&qca->tx_idle_timer, hci_ibs_tx_idle_timeout, (u_long)hu);\n\tqca->tx_idle_delay = IBS_TX_IDLE_TIMEOUT_MS;\n\n\tBT_DBG(\"HCI_UART_QCA open, tx_idle_delay=%u, wake_retrans=%u\",\n\t       qca->tx_idle_delay, qca->wake_retrans);\n\n\treturn 0;\n}\n\nstatic void qca_debugfs_init(struct hci_dev *hdev)\n{\n\tstruct hci_uart *hu = hci_get_drvdata(hdev);\n\tstruct qca_data *qca = hu->priv;\n\tstruct dentry *ibs_dir;\n\tumode_t mode;\n\n\tif (!hdev->debugfs)\n\t\treturn;\n\n\tibs_dir = debugfs_create_dir(\"ibs\", hdev->debugfs);\n\n\t/* read only */\n\tmode = S_IRUGO;\n\tdebugfs_create_u8(\"tx_ibs_state\", mode, ibs_dir, &qca->tx_ibs_state);\n\tdebugfs_create_u8(\"rx_ibs_state\", mode, ibs_dir, &qca->rx_ibs_state);\n\tdebugfs_create_u64(\"ibs_sent_sleeps\", mode, ibs_dir,\n\t\t\t   &qca->ibs_sent_slps);\n\tdebugfs_create_u64(\"ibs_sent_wakes\", mode, ibs_dir,\n\t\t\t   &qca->ibs_sent_wakes);\n\tdebugfs_create_u64(\"ibs_sent_wake_acks\", mode, ibs_dir,\n\t\t\t   &qca->ibs_sent_wacks);\n\tdebugfs_create_u64(\"ibs_recv_sleeps\", mode, ibs_dir,\n\t\t\t   &qca->ibs_recv_slps);\n\tdebugfs_create_u64(\"ibs_recv_wakes\", mode, ibs_dir,\n\t\t\t   &qca->ibs_recv_wakes);\n\tdebugfs_create_u64(\"ibs_recv_wake_acks\", mode, ibs_dir,\n\t\t\t   &qca->ibs_recv_wacks);\n\tdebugfs_create_bool(\"tx_vote\", mode, ibs_dir, &qca->tx_vote);\n\tdebugfs_create_u64(\"tx_votes_on\", mode, ibs_dir, &qca->tx_votes_on);\n\tdebugfs_create_u64(\"tx_votes_off\", mode, ibs_dir, &qca->tx_votes_off);\n\tdebugfs_create_bool(\"rx_vote\", mode, ibs_dir, &qca->rx_vote);\n\tdebugfs_create_u64(\"rx_votes_on\", mode, ibs_dir, &qca->rx_votes_on);\n\tdebugfs_create_u64(\"rx_votes_off\", mode, ibs_dir, &qca->rx_votes_off);\n\tdebugfs_create_u64(\"votes_on\", mode, ibs_dir, &qca->votes_on);\n\tdebugfs_create_u64(\"votes_off\", mode, ibs_dir, &qca->votes_off);\n\tdebugfs_create_u32(\"vote_on_ms\", mode, ibs_dir, &qca->vote_on_ms);\n\tdebugfs_create_u32(\"vote_off_ms\", mode, ibs_dir, &qca->vote_off_ms);\n\n\t/* read/write */\n\tmode = S_IRUGO | S_IWUSR;\n\tdebugfs_create_u32(\"wake_retrans\", mode, ibs_dir, &qca->wake_retrans);\n\tdebugfs_create_u32(\"tx_idle_delay\", mode, ibs_dir,\n\t\t\t   &qca->tx_idle_delay);\n}\n\n/* Flush protocol data */\nstatic int qca_flush(struct hci_uart *hu)\n{\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p qca flush\", hu);\n\n\tskb_queue_purge(&qca->tx_wait_q);\n\tskb_queue_purge(&qca->txq);\n\n\treturn 0;\n}\n\n/* Close protocol */\nstatic int qca_close(struct hci_uart *hu)\n{\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p qca close\", hu);\n\n\tserial_clock_vote(HCI_IBS_VOTE_STATS_UPDATE, hu);\n\n\tskb_queue_purge(&qca->tx_wait_q);\n\tskb_queue_purge(&qca->txq);\n\tdel_timer(&qca->tx_idle_timer);\n\tdel_timer(&qca->wake_retrans_timer);\n\tdestroy_workqueue(qca->workqueue);\n\tqca->hu = NULL;\n\n\tkfree_skb(qca->rx_skb);\n\n\thu->priv = NULL;\n\n\tkfree(qca);\n\n\treturn 0;\n}\n\n/* Called upon a wake-up-indication from the device.\n */\nstatic void device_want_to_wakeup(struct hci_uart *hu)\n{\n\tunsigned long flags;\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p want to wake up\", hu);\n\n\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\n\n\tqca->ibs_recv_wakes++;\n\n\tswitch (qca->rx_ibs_state) {\n\tcase HCI_IBS_RX_ASLEEP:\n\t\t/* Make sure clock is on - we may have turned clock off since\n\t\t * receiving the wake up indicator awake rx clock.\n\t\t */\n\t\tqueue_work(qca->workqueue, &qca->ws_awake_rx);\n\t\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n\t\treturn;\n\n\tcase HCI_IBS_RX_AWAKE:\n\t\t/* Always acknowledge device wake up,\n\t\t * sending IBS message doesn't count as TX ON.\n\t\t */\n\t\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_ACK, hu) < 0) {\n\t\t\tBT_ERR(\"Failed to acknowledge device wake up\");\n\t\t\tbreak;\n\t\t}\n\t\tqca->ibs_sent_wacks++;\n\t\tbreak;\n\n\tdefault:\n\t\t/* Any other state is illegal */\n\t\tBT_ERR(\"Received HCI_IBS_WAKE_IND in rx state %d\",\n\t\t       qca->rx_ibs_state);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n\n\t/* Actually send the packets */\n\thci_uart_tx_wakeup(hu);\n}\n\n/* Called upon a sleep-indication from the device.\n */\nstatic void device_want_to_sleep(struct hci_uart *hu)\n{\n\tunsigned long flags;\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p want to sleep\", hu);\n\n\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\n\n\tqca->ibs_recv_slps++;\n\n\tswitch (qca->rx_ibs_state) {\n\tcase HCI_IBS_RX_AWAKE:\n\t\t/* Update state */\n\t\tqca->rx_ibs_state = HCI_IBS_RX_ASLEEP;\n\t\t/* Vote off rx clock under workqueue */\n\t\tqueue_work(qca->workqueue, &qca->ws_rx_vote_off);\n\t\tbreak;\n\n\tcase HCI_IBS_RX_ASLEEP:\n\t\t/* Fall through */\n\n\tdefault:\n\t\t/* Any other state is illegal */\n\t\tBT_ERR(\"Received HCI_IBS_SLEEP_IND in rx state %d\",\n\t\t       qca->rx_ibs_state);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n}\n\n/* Called upon wake-up-acknowledgement from the device\n */\nstatic void device_woke_up(struct hci_uart *hu)\n{\n\tunsigned long flags, idle_delay;\n\tstruct qca_data *qca = hu->priv;\n\tstruct sk_buff *skb = NULL;\n\n\tBT_DBG(\"hu %p woke up\", hu);\n\n\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\n\n\tqca->ibs_recv_wacks++;\n\n\tswitch (qca->tx_ibs_state) {\n\tcase HCI_IBS_TX_AWAKE:\n\t\t/* Expect one if we send 2 WAKEs */\n\t\tBT_DBG(\"Received HCI_IBS_WAKE_ACK in tx state %d\",\n\t\t       qca->tx_ibs_state);\n\t\tbreak;\n\n\tcase HCI_IBS_TX_WAKING:\n\t\t/* Send pending packets */\n\t\twhile ((skb = skb_dequeue(&qca->tx_wait_q)))\n\t\t\tskb_queue_tail(&qca->txq, skb);\n\n\t\t/* Switch timers and change state to HCI_IBS_TX_AWAKE */\n\t\tdel_timer(&qca->wake_retrans_timer);\n\t\tidle_delay = msecs_to_jiffies(qca->tx_idle_delay);\n\t\tmod_timer(&qca->tx_idle_timer, jiffies + idle_delay);\n\t\tqca->tx_ibs_state = HCI_IBS_TX_AWAKE;\n\t\tbreak;\n\n\tcase HCI_IBS_TX_ASLEEP:\n\t\t/* Fall through */\n\n\tdefault:\n\t\tBT_ERR(\"Received HCI_IBS_WAKE_ACK in tx state %d\",\n\t\t       qca->tx_ibs_state);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n\n\t/* Actually send the packets */\n\thci_uart_tx_wakeup(hu);\n}\n\n/* Enqueue frame for transmittion (padding, crc, etc) may be called from\n * two simultaneous tasklets.\n */\nstatic int qca_enqueue(struct hci_uart *hu, struct sk_buff *skb)\n{\n\tunsigned long flags = 0, idle_delay;\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p qca enq skb %p tx_ibs_state %d\", hu, skb,\n\t       qca->tx_ibs_state);\n\n\t/* Prepend skb with frame type */\n\tmemcpy(skb_push(skb, 1), &hci_skb_pkt_type(skb), 1);\n\n\t/* Don't go to sleep in middle of patch download or\n\t * Out-Of-Band(GPIOs control) sleep is selected.\n\t */\n\tif (!test_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags)) {\n\t\tskb_queue_tail(&qca->txq, skb);\n\t\treturn 0;\n\t}\n\n\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\n\n\t/* Act according to current state */\n\tswitch (qca->tx_ibs_state) {\n\tcase HCI_IBS_TX_AWAKE:\n\t\tBT_DBG(\"Device awake, sending normally\");\n\t\tskb_queue_tail(&qca->txq, skb);\n\t\tidle_delay = msecs_to_jiffies(qca->tx_idle_delay);\n\t\tmod_timer(&qca->tx_idle_timer, jiffies + idle_delay);\n\t\tbreak;\n\n\tcase HCI_IBS_TX_ASLEEP:\n\t\tBT_DBG(\"Device asleep, waking up and queueing packet\");\n\t\t/* Save packet for later */\n\t\tskb_queue_tail(&qca->tx_wait_q, skb);\n\n\t\tqca->tx_ibs_state = HCI_IBS_TX_WAKING;\n\t\t/* Schedule a work queue to wake up device */\n\t\tqueue_work(qca->workqueue, &qca->ws_awake_device);\n\t\tbreak;\n\n\tcase HCI_IBS_TX_WAKING:\n\t\tBT_DBG(\"Device waking up, queueing packet\");\n\t\t/* Transient state; just keep packet for later */\n\t\tskb_queue_tail(&qca->tx_wait_q, skb);\n\t\tbreak;\n\n\tdefault:\n\t\tBT_ERR(\"Illegal tx state: %d (losing packet)\",\n\t\t       qca->tx_ibs_state);\n\t\tkfree_skb(skb);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n\n\treturn 0;\n}\n\nstatic int qca_ibs_sleep_ind(struct hci_dev *hdev, struct sk_buff *skb)\n{\n\tstruct hci_uart *hu = hci_get_drvdata(hdev);\n\n\tBT_DBG(\"hu %p recv hci ibs cmd 0x%x\", hu, HCI_IBS_SLEEP_IND);\n\n\tdevice_want_to_sleep(hu);\n\n\tkfree_skb(skb);\n\treturn 0;\n}\n\nstatic int qca_ibs_wake_ind(struct hci_dev *hdev, struct sk_buff *skb)\n{\n\tstruct hci_uart *hu = hci_get_drvdata(hdev);\n\n\tBT_DBG(\"hu %p recv hci ibs cmd 0x%x\", hu, HCI_IBS_WAKE_IND);\n\n\tdevice_want_to_wakeup(hu);\n\n\tkfree_skb(skb);\n\treturn 0;\n}\n\nstatic int qca_ibs_wake_ack(struct hci_dev *hdev, struct sk_buff *skb)\n{\n\tstruct hci_uart *hu = hci_get_drvdata(hdev);\n\n\tBT_DBG(\"hu %p recv hci ibs cmd 0x%x\", hu, HCI_IBS_WAKE_ACK);\n\n\tdevice_woke_up(hu);\n\n\tkfree_skb(skb);\n\treturn 0;\n}\n\n#define QCA_IBS_SLEEP_IND_EVENT \\\n\t.type = HCI_IBS_SLEEP_IND, \\\n\t.hlen = 0, \\\n\t.loff = 0, \\\n\t.lsize = 0, \\\n\t.maxlen = HCI_MAX_IBS_SIZE\n\n#define QCA_IBS_WAKE_IND_EVENT \\\n\t.type = HCI_IBS_WAKE_IND, \\\n\t.hlen = 0, \\\n\t.loff = 0, \\\n\t.lsize = 0, \\\n\t.maxlen = HCI_MAX_IBS_SIZE\n\n#define QCA_IBS_WAKE_ACK_EVENT \\\n\t.type = HCI_IBS_WAKE_ACK, \\\n\t.hlen = 0, \\\n\t.loff = 0, \\\n\t.lsize = 0, \\\n\t.maxlen = HCI_MAX_IBS_SIZE\n\nstatic const struct h4_recv_pkt qca_recv_pkts[] = {\n\t{ H4_RECV_ACL,             .recv = hci_recv_frame    },\n\t{ H4_RECV_SCO,             .recv = hci_recv_frame    },\n\t{ H4_RECV_EVENT,           .recv = hci_recv_frame    },\n\t{ QCA_IBS_WAKE_IND_EVENT,  .recv = qca_ibs_wake_ind  },\n\t{ QCA_IBS_WAKE_ACK_EVENT,  .recv = qca_ibs_wake_ack  },\n\t{ QCA_IBS_SLEEP_IND_EVENT, .recv = qca_ibs_sleep_ind },\n};\n\nstatic int qca_recv(struct hci_uart *hu, const void *data, int count)\n{\n\tstruct qca_data *qca = hu->priv;\n\n\tif (!test_bit(HCI_UART_REGISTERED, &hu->flags))\n\t\treturn -EUNATCH;\n\n\tqca->rx_skb = h4_recv_buf(hu->hdev, qca->rx_skb, data, count,\n\t\t\t\t  qca_recv_pkts, ARRAY_SIZE(qca_recv_pkts));\n\tif (IS_ERR(qca->rx_skb)) {\n\t\tint err = PTR_ERR(qca->rx_skb);\n\t\tBT_ERR(\"%s: Frame reassembly failed (%d)\", hu->hdev->name, err);\n\t\tqca->rx_skb = NULL;\n\t\treturn err;\n\t}\n\n\treturn count;\n}\n\nstatic struct sk_buff *qca_dequeue(struct hci_uart *hu)\n{\n\tstruct qca_data *qca = hu->priv;\n\n\treturn skb_dequeue(&qca->txq);\n}\n\nstatic uint8_t qca_get_baudrate_value(int speed)\n{\n\tswitch (speed) {\n\tcase 9600:\n\t\treturn QCA_BAUDRATE_9600;\n\tcase 19200:\n\t\treturn QCA_BAUDRATE_19200;\n\tcase 38400:\n\t\treturn QCA_BAUDRATE_38400;\n\tcase 57600:\n\t\treturn QCA_BAUDRATE_57600;\n\tcase 115200:\n\t\treturn QCA_BAUDRATE_115200;\n\tcase 230400:\n\t\treturn QCA_BAUDRATE_230400;\n\tcase 460800:\n\t\treturn QCA_BAUDRATE_460800;\n\tcase 500000:\n\t\treturn QCA_BAUDRATE_500000;\n\tcase 921600:\n\t\treturn QCA_BAUDRATE_921600;\n\tcase 1000000:\n\t\treturn QCA_BAUDRATE_1000000;\n\tcase 2000000:\n\t\treturn QCA_BAUDRATE_2000000;\n\tcase 3000000:\n\t\treturn QCA_BAUDRATE_3000000;\n\tcase 3500000:\n\t\treturn QCA_BAUDRATE_3500000;\n\tdefault:\n\t\treturn QCA_BAUDRATE_115200;\n\t}\n}\n\nstatic int qca_set_baudrate(struct hci_dev *hdev, uint8_t baudrate)\n{\n\tstruct hci_uart *hu = hci_get_drvdata(hdev);\n\tstruct qca_data *qca = hu->priv;\n\tstruct sk_buff *skb;\n\tu8 cmd[] = { 0x01, 0x48, 0xFC, 0x01, 0x00 };\n\n\tif (baudrate > QCA_BAUDRATE_3000000)\n\t\treturn -EINVAL;\n\n\tcmd[4] = baudrate;\n\n\tskb = bt_skb_alloc(sizeof(cmd), GFP_ATOMIC);\n\tif (!skb) {\n\t\tBT_ERR(\"Failed to allocate memory for baudrate packet\");\n\t\treturn -ENOMEM;\n\t}\n\n\t/* Assign commands to change baudrate and packet type. */\n\tmemcpy(skb_put(skb, sizeof(cmd)), cmd, sizeof(cmd));\n\thci_skb_pkt_type(skb) = HCI_COMMAND_PKT;\n\n\tskb_queue_tail(&qca->txq, skb);\n\thci_uart_tx_wakeup(hu);\n\n\t/* wait 300ms to change new baudrate on controller side\n\t * controller will come back after they receive this HCI command\n\t * then host can communicate with new baudrate to controller\n\t */\n\tset_current_state(TASK_UNINTERRUPTIBLE);\n\tschedule_timeout(msecs_to_jiffies(BAUDRATE_SETTLE_TIMEOUT_MS));\n\tset_current_state(TASK_INTERRUPTIBLE);\n\n\treturn 0;\n}\n\nstatic int qca_setup(struct hci_uart *hu)\n{\n\tstruct hci_dev *hdev = hu->hdev;\n\tstruct qca_data *qca = hu->priv;\n\tunsigned int speed, qca_baudrate = QCA_BAUDRATE_115200;\n\tint ret;\n\n\tBT_INFO(\"%s: ROME setup\", hdev->name);\n\n\t/* Patch downloading has to be done without IBS mode */\n\tclear_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags);\n\n\t/* Setup initial baudrate */\n\tspeed = 0;\n\tif (hu->init_speed)\n\t\tspeed = hu->init_speed;\n\telse if (hu->proto->init_speed)\n\t\tspeed = hu->proto->init_speed;\n\n\tif (speed)\n\t\thci_uart_set_baudrate(hu, speed);\n\n\t/* Setup user speed if needed */\n\tspeed = 0;\n\tif (hu->oper_speed)\n\t\tspeed = hu->oper_speed;\n\telse if (hu->proto->oper_speed)\n\t\tspeed = hu->proto->oper_speed;\n\n\tif (speed) {\n\t\tqca_baudrate = qca_get_baudrate_value(speed);\n\n\t\tBT_INFO(\"%s: Set UART speed to %d\", hdev->name, speed);\n\t\tret = qca_set_baudrate(hdev, qca_baudrate);\n\t\tif (ret) {\n\t\t\tBT_ERR(\"%s: Failed to change the baud rate (%d)\",\n\t\t\t       hdev->name, ret);\n\t\t\treturn ret;\n\t\t}\n\t\thci_uart_set_baudrate(hu, speed);\n\t}\n\n\t/* Setup patch / NVM configurations */\n\tret = qca_uart_setup_rome(hdev, qca_baudrate);\n\tif (!ret) {\n\t\tset_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags);\n\t\tqca_debugfs_init(hdev);\n\t}\n\n\t/* Setup bdaddr */\n\thu->hdev->set_bdaddr = qca_set_bdaddr_rome;\n\n\treturn ret;\n}\n\nstatic struct hci_uart_proto qca_proto = {\n\t.id\t\t= HCI_UART_QCA,\n\t.name\t\t= \"QCA\",\n\t.manufacturer\t= 29,\n\t.init_speed\t= 115200,\n\t.oper_speed\t= 3000000,\n\t.open\t\t= qca_open,\n\t.close\t\t= qca_close,\n\t.flush\t\t= qca_flush,\n\t.setup\t\t= qca_setup,\n\t.recv\t\t= qca_recv,\n\t.enqueue\t= qca_enqueue,\n\t.dequeue\t= qca_dequeue,\n};\n\nint __init qca_init(void)\n{\n\treturn hci_uart_register_proto(&qca_proto);\n}\n\nint __exit qca_deinit(void)\n{\n\treturn hci_uart_unregister_proto(&qca_proto);\n}\n`\n\n\n// WEBPACK FOOTER //\n// ./src/FakeCode.js","/**\n * Jscii - Image to ASCII converter\n * http://enotionz.github.com/jscii/\n * Author: Dominick Pham (@enotionz | http://dph.am)\n */\n\n!function() {\n\n\tnavigator.getUserMedia = navigator.getUserMedia ||\n\t\tnavigator.webkitGetUserMedia ||\n\t\tnavigator.mozGetUserMedia ||\n\t\tnavigator.msGetUserMedia;\n\n\t/**\n\t * value to character mapping from dark to light\n\t * add more characters and they will be accounted for automatically\n\t * note: the extra &nbsp; is to account for the value range inclusive of 100%\n\t */\n\tvar chars = ['@','#','$','=','*','!',';',':','~','-',',','.','&nbsp;', '&nbsp;'];\n\t// invert colors\n\tchars = [\"&nbsp;\", \"&nbsp;\", \".\", \",\", \"-\", \"~\", \":\", \";\", \"!\", \"*\", \"=\", \"$\", \"#\", \"@\"];\n\tvar charLen = chars.length-1;\n\tfunction getChar(val) { return chars[parseInt(val*charLen, 10)]; }\n\n\t/**\n\t * log when getUserMedia or when video metadata loading fail\n\t */\n\tfunction logError(err) { if(console && console.log) console.log('Error!', err); return false; }\n\n\t/**\n\t * Options:\n\t * el        - DOM node (img or video)\n\t * container - if supplied, ascii string will automatically be set on container innerHTML during a render\n\t * fn        - function, callback to fire during a render with ascii string as arguments[0]\n\t * width     - hi-res images/videos must be resized down, specify width and jscii will figure out height\n\t * color     - enable color ascii (highly experimental)\n\t * interval  - integer - for videos only, this is the interval between each render\n\t * webrtc    - bool, default false, only applicable if 'el' is a video\n\t */\n\tfunction Jscii(params) {\n\t\tvar self = this;\n\n\t\tvar el = this.el = params.el;\n\t\tthis.container = params.container;\n\t\tthis.fn = typeof params.fn === 'function' ? params.fn : null;\n\t\tthis.width = typeof params.width === 'number' ? params.width : 150;\n\t\tthis.color = !!params.color;\n\n\t\tthis.canvas = document.createElement('canvas');\n\t\tthis.ctx = this.canvas.getContext('2d');\n\t\tvar nodeName = el.nodeName;\n\t\tif(nodeName === 'IMG') {\n\t\t\tself.render();\n\t\t\tel.addEventListener('load', function(){ self.render(); });\n\t\t} else if(nodeName === 'VIDEO') {\n\t\t\tthis.interval = typeof params.interval === 'number' ? params.interval : 15;\n\t\t\tthis.webrtc = !!params.webrtc;\n\n\t\t\tif(this.webrtc) {\n\t\t\t\tif(typeof navigator.getUserMedia !== 'function') {\n\t\t\t\t\treturn logError((el.innerHTML = 'Error: browser does not support WebRTC'));\n\t\t\t\t}\n\t\t\t\tnavigator.getUserMedia({video: true, audio: false}, function(localMediaStream){\n\t\t\t\t\tself.mediaStream = localMediaStream;\n\t\t\t\t\tel.src = (window.URL || window.webkitURL).createObjectURL(localMediaStream);\n\t\t\t\t}, logError);\n\t\t\t}\n\t\t\tel.addEventListener('loadeddata', function() { self.play(); });\n\t\t}\n\t}\n\n\t/**\n\t * start rendering, for video type only\n\t */\n\tJscii.prototype.play = function() {\n\t\tvar self = this;\n\t\tself.pause().videoTimer = setInterval(function() {\n\t\t\tif(self.mediaStream || !self.webrtc) self.render();\n\t\t}, self.interval);\n\t\treturn self;\n\t};\n\n\t/**\n\t * pause rendering, for video type only\n\t */\n\tJscii.prototype.pause = function() {\n\t\tif(this.videoTimer) clearInterval(this.videoTimer);\n\t\treturn this;\n\t};\n\n\t/**\n\t * getter/setter for output dimension\n\t */\n\tJscii.prototype.dimension = function(width, height) {\n\t\tif(typeof width === 'number' && typeof height === 'number') {\n\t\t\tthis._scaledWidth = this.canvas.width = width;\n\t\t\tthis._scaledHeight = this.canvas.height = height;\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn { width: this._scaledWidth, height: this._scaledHeight };\n\t\t}\n\t};\n\n\t/**\n\t * gets context image data, perform ascii conversion, append string to container\n\t */\n\tJscii.prototype.render = function() {\n\t\tvar el = this.el, nodeName = el.nodeName, ratio;\n\t\tvar dim = this.dimension(), width, height;\n\t\tif(!dim.width || !dim.height) {\n\t\t\tratio = nodeName === 'IMG' ? el.height/el.width : el.videoHeight/el.videoWidth;\n\t\t\tthis.dimension(this.width, parseInt(this.width*ratio, 10));\n\t\t\tdim = this.dimension();\n\t\t}\n\t\twidth = dim.width;\n\t\theight = dim.height;\n\n\t\t// might take a few cycles before we\n\t\tif(!width || !height) return;\n\n\t\tthis.ctx.drawImage(this.el, 0, 0, width, height);\n\t\tthis.imageData = this.ctx.getImageData(0, 0, width, height).data;\n\t\tvar asciiStr = this.getAsciiString();\n\t\tif(this.container) this.container.innerHTML = asciiStr;\n\t\tif(this.fn) this.fn(asciiStr);\n\t};\n\n\t/**\n\t * given a picture/frame's pixel data and a defined width and height\n\t * return the ASCII string representing the image\n\t */\n\tJscii.prototype.getAsciiString = function() {\n\t\tvar dim = this.dimension(), width = dim.width, height = dim.height;\n\t\tvar len = width*height, d = this.imageData, str = '';\n\n\t\t// helper function to retrieve rgb value from pixel data\n\t\tvar getRGB = function(i) { return [d[i=i*4], d[i+1], d[i+2]]; };\n\n\t\tfor(var i=0; i<len; i++) {\n\t\t\tif(i%width === 0) str += '\\n';\n\t\t\tvar rgb = getRGB(i);\n\t\t\tvar val = Math.max(rgb[0], rgb[1], rgb[2])/255;\n\t\t\tif(this.color) str += '<font style=\"color: rgb('+rgb.join(',')+')\">'+getChar(val)+'</font>';\n\t\t\telse str += getChar(val);\n\t\t}\n\t\treturn str;\n\t};\n\n\twindow.Jscii = Jscii;\n\n}();\n\n\n// WEBPACK FOOTER //\n// ./src/Jscii.js","module.exports = __webpack_public_path__ + \"static/img/amy.a7fc195.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/amy.png\n// module id = 124\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/charna.aeb5628.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/charna.png\n// module id = 125\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/del.92abdc1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/del.png\n// module id = 126\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/ian.638d02f.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/ian.png\n// module id = 127\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/keith.6b63371.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/keith.png\n// module id = 128\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/tj.3bd54f1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/tj.png\n// module id = 129\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/viola.8d75b50.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/viola.png\n// module id = 130\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-1799c926!vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./App.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-1799c926!vue-loader/lib/selector?type=template&index=0!./App.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 131\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-c73afbb0&scoped=true!sass-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./AsciiImage.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./AsciiImage.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-c73afbb0!vue-loader/lib/selector?type=template&index=0!./AsciiImage.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-c73afbb0\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/AsciiImage.vue\n// module id = 132\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-1a08c484&scoped=true!sass-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./BootAnimation.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./BootAnimation.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-1a08c484!vue-loader/lib/selector?type=template&index=0!./BootAnimation.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-1a08c484\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/BootAnimation.vue\n// module id = 133\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-b0f73184&scoped=true!sass-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./Intro.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Intro.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-b0f73184!vue-loader/lib/selector?type=template&index=0!./Intro.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-b0f73184\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Intro.vue\n// module id = 134\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-1027e76e&scoped=true!sass-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./Rules.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Rules.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-1027e76e!vue-loader/lib/selector?type=template&index=0!./Rules.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-1027e76e\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Rules.vue\n// module id = 135\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-7768a5b6&scoped=true!sass-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./Simulation.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Simulation.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-7768a5b6!vue-loader/lib/selector?type=template&index=0!./Simulation.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-7768a5b6\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Simulation.vue\n// module id = 136\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"rules\"\n    }\n  }, [(_vm.step == 'board') ? _c('div', [_c('div', {\n    attrs: {\n      \"id\": \"board-title\"\n    }\n  }, [_vm._v(\"\\n        Active Rules\\n\")]), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"board\"\n    }\n  }, _vm._l((_vm.rules), function(rule) {\n    return _c('div', [_c('div', {\n      staticClass: \"rule\",\n      class: {\n        removing: rule.removing\n      }\n    }, [_vm._v(\"\\n            \" + _vm._s(rule.text) + \"\\n          \")])])\n  }))]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'new rule') ? _c('div', {\n    attrs: {\n      \"id\": \"new-rule\"\n    }\n  }, [_c('div', {\n    staticClass: \"flash-text\"\n  }, [_vm._v(\"\\n        NEW RULE\\n      \")])]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'remove rule') ? _c('div', {\n    attrs: {\n      \"id\": \"new-rule\"\n    }\n  }, [_c('div', {\n    staticClass: \"flash-text\"\n  }, [_vm._v(\"\\n        REMOVING RULE\\n      \")])]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'read rule') ? _c('div', [_c('TypeAndSay', {\n    attrs: {\n      \"timeout\": 40,\n      \"doneReading\": _vm.doneReading\n    }\n  }, [_vm._v(\"\\n        \" + _vm._s(_vm.readRuleText) + \"\\n      \")])], 1) : _vm._e(), _vm._v(\" \"), (_vm.step == 'closer') ? _c('div', [_c('div', {\n    class: {\n      'flash-text': _vm.closerStep == 'closer title'\n    },\n    attrs: {\n      \"id\": \"closer\"\n    }\n  }, [(_vm.closerStep == 'closer title') ? _c('div', [_c('div', {\n    staticClass: \"flash-text\"\n  }, [_vm._v(\"\\n            CLOSER\\n          \")])]) : _vm._e(), _vm._v(\" \"), (_vm.closerStep == 'read closer') ? _c('div', [_c('TypeAndSay', {\n    attrs: {\n      \"timeout\": 40,\n      \"doneReading\": _vm.closerFunc\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.closerText) + \"\\n          \")])], 1) : _vm._e()])]) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-1027e76e!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Rules.vue\n// module id = 137\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [(_vm.step.current == 'boot') ? _c('div', [_c('BootAnimation', {\n    attrs: {\n      \"showStep\": _vm.step\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'intro') ? _c('div', [_c('Intro', {\n    attrs: {\n      \"names\": _vm.names,\n      \"step\": _vm.step\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'rules') ? _c('div', [_c('Rules', {\n    attrs: {\n      \"ruleGens\": _vm.rules,\n      \"improvisers\": _vm.improvisers\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'simulate') ? _c('div', [_c('Simulation', {\n    attrs: {\n      \"ruleGens\": _vm.rules,\n      \"names\": _vm.names\n    }\n  })], 1) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-1799c926!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 138\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"boot-animation\"\n    }\n  }, [(_vm.step == 'fakeCode') ? _c('div', {\n    attrs: {\n      \"id\": \"fakecode\"\n    }\n  }, [_c('pre', [_vm._v(\"\\n        \"), _c('TypeWriter', {\n    attrs: {\n      \"timeout\": 40,\n      \"spliton\": '\\n'\n    }\n  }, [_vm._v(_vm._s(_vm.fakeCode))]), _vm._v(\"\\n      \")], 1)]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'greenFlash') ? _c('div', {\n    staticClass: \"glitch\",\n    attrs: {\n      \"id\": \"green-flash\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.step == 'ascii') ? _c('div', {\n    attrs: {\n      \"id\": \"ascii\"\n    }\n  }, [_c('pre', {\n    attrs: {\n      \"id\": \"loading\"\n    }\n  }, [_vm._v(\"\\n        \"), _c('TypeWriter', {\n    attrs: {\n      \"timeout\": 60\n    }\n  }, [_vm._v(\"\\n\\nCalibrating comedic timing...\\nNullifying transactions...\\nFinding light...\\nSimulating montage...\\n\\n        \")]), _vm._v(\"        \\n      \")], 1), _vm._v(\" \"), _c('AsciiImage', {\n    attrs: {\n      \"imagename\": _vm.asciiName\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step == 'title') ? _c('div', {\n    class: {\n      inverted: _vm.titleInverted\n    },\n    attrs: {\n      \"id\": \"title\"\n    }\n  }, [_c('div', [_vm._v(\"IMPROV\")]), _vm._v(\" \"), _c('div', [_vm._v(\"GOD\")])]) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-1a08c484!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/BootAnimation.vue\n// module id = 139\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"typewriter\"\n  }, [_vm._v(\"\\n  \" + _vm._s(_vm.text) + \"\\n\")])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-37ef7f2a!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/TypeWriter.vue\n// module id = 140\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"simulation\"\n    },\n    on: {\n      \"click\": _vm.simulateShow\n    }\n  }, [_c('h1', [_vm._v(\"Click me to simulate a show\")]), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"timeline\"\n    }\n  }, _vm._l((_vm.actions), function(action, i) {\n    return _c('div', {\n      staticClass: \"action\",\n      style: ({\n        left: _vm.getActionPos(action, _vm.actions)\n      })\n    }, [_c('div', {\n      staticClass: \"rules\",\n      style: ({\n        height: action.rules * 8 + 18 + 'px',\n        top: -action.rules * 8 - 18 + 'px'\n      })\n    }, [_c('span', {\n      staticClass: \"text\"\n    }, [_vm._v(\"\\n\\t\\t\\t\\t\\t\" + _vm._s(action.rules) + \"\\n\\t\\t\\t\\t\")])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"message\",\n      style: ({\n        height: i % 5 * 28 + 20 + 'px'\n      })\n    }, [_c('span', {\n      staticClass: \"text\"\n    }, [_vm._v(\"\\n\\t\\t\\t\\t\\t\" + _vm._s(action.message) + \" \" + _vm._s(_vm.formatTime(action.time)) + \"\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\")])])])\n  }))])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-7768a5b6!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Simulation.vue\n// module id = 141\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"type-and-say\"\n    }\n  }, [_c('TypeWriter', {\n    attrs: {\n      \"volume\": _vm.typingVolume,\n      \"timeout\": _vm.timeout\n    }\n  }, [_vm._t(\"default\")], 2)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-95baebe8!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/TypeAndSay.vue\n// module id = 142\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"intro\"\n    }\n  }, [_c('TypeAndSay', [_vm._v(_vm._s(_vm.message))])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-b0f73184!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Intro.vue\n// module id = 143\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"ascii-image\",\n    class: {\n      loaded: _vm.asciiLoaded\n    }\n  }, [_c('img', {\n    attrs: {\n      \"id\": \"image-del\",\n      \"src\": require(\"../assets/del.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-amy\",\n      \"src\": require(\"../assets/amy.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-charna\",\n      \"src\": require(\"../assets/charna.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-keith\",\n      \"src\": require(\"../assets/keith.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-tj\",\n      \"src\": require(\"../assets/tj.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-ian\",\n      \"src\": require(\"../assets/ian.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-viola\",\n      \"src\": require(\"../assets/viola.png\")\n    }\n  }), _vm._v(\" \"), _c('pre', {\n    staticClass: \"ascii-text\"\n  }, [_vm._v(\"\\n    \" + _vm._s(_vm.text) + \"\\n  \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"loading-cover\"\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-c73afbb0!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/AsciiImage.vue\n// module id = 144\n// module chunks = 2"],"sourceRoot":""}